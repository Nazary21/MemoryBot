2025-02-13 15:34:53,469 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-13 15:34:53,469 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `setMyCommands` with parameters `{'commands': [BotCommand(command='start', description='Start the bot'), BotCommand(command='help', description='Show available commands'), BotCommand(command='clear', description='Clear conversation history'), BotCommand(command='session', description='Set session duration'), BotCommand(command='analyze', description='Analyze conversation history')]}`
2025-02-13 15:34:53,472 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-13 15:34:53,512 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x104e4a3c0>
2025-02-13 15:34:53,512 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1047ece60> server_hostname='api.telegram.org' timeout=5.0
2025-02-13 15:34:53,573 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x104e41590>
2025-02-13 15:34:53,573 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 15:34:53,573 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 15:34:53,574 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 15:34:53,574 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 15:34:53,574 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 15:34:53,643 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 13 Feb 2025 14:34:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-02-13 15:34:53,643 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8050570051:AAG4byICXKPopJ4pkngSfXLBEa7ZnJ4eTrs/setMyCommands "HTTP/1.1 200 OK"
2025-02-13 15:34:53,643 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 15:34:53,643 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 15:34:53,643 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 15:34:53,643 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 15:34:53,644 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `setMyCommands` finished with return value `True`
2025-02-13 15:34:53,644 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-13 15:34:53,645 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-13 15:37:17,038 - __main__ - DEBUG - Webhook called
2025-02-13 15:37:17,038 - __main__ - DEBUG - Webhook body: {'update_id': 647682790, 'message': {'message_id': 14, 'from': {'id': 308526396, 'is_bot': False, 'first_name': 'Naz', 'username': 'nm_2719', 'language_code': 'en', 'is_premium': True}, 'chat': {'id': 308526396, 'first_name': 'Naz', 'username': 'nm_2719', 'type': 'private'}, 'date': 1739457436, 'text': 'Yoyoyoy'}}
2025-02-13 15:37:17,039 - __main__ - DEBUG - Parsed update: Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Naz', id=308526396, type=<ChatType.PRIVATE>, username='nm_2719'), date=datetime.datetime(2025, 2, 13, 14, 37, 16, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Naz', id=308526396, is_bot=False, is_premium=True, language_code='en', username='nm_2719'), group_chat_created=False, message_id=14, supergroup_chat_created=False, text='Yoyoyoy'), update_id=647682790)
2025-02-13 15:37:33,397 - asyncio - ERROR - Task was destroyed but it is pending!
task: <Task pending name='Task-4' coro=<update_history_context() running at /Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/utils/context_updater.py:32>>
2025-02-13 15:37:33,398 - asyncio - ERROR - Task was destroyed but it is pending!
task: <Task pending name='Task-5' coro=<periodic_history_analysis() running at /Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/utils/whole_history_analyzer.py:64>>
2025-02-13 15:37:35,317 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-13 15:37:35,317 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `setMyCommands` with parameters `{'commands': [BotCommand(command='start', description='Start the bot'), BotCommand(command='help', description='Show available commands'), BotCommand(command='clear', description='Clear conversation history'), BotCommand(command='session', description='Set session duration'), BotCommand(command='analyze', description='Analyze conversation history')]}`
2025-02-13 15:37:35,320 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-13 15:37:35,362 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10e54a3c0>
2025-02-13 15:37:35,362 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108fece60> server_hostname='api.telegram.org' timeout=5.0
2025-02-13 15:37:35,415 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10e541590>
2025-02-13 15:37:35,416 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 15:37:35,416 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 15:37:35,416 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 15:37:35,416 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 15:37:35,416 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 15:37:35,503 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 13 Feb 2025 14:37:35 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-02-13 15:37:35,504 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8050570051:AAG4byICXKPopJ4pkngSfXLBEa7ZnJ4eTrs/setMyCommands "HTTP/1.1 200 OK"
2025-02-13 15:37:35,504 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 15:37:35,504 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 15:37:35,504 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 15:37:35,504 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 15:37:35,505 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `setMyCommands` finished with return value `True`
2025-02-13 15:37:35,505 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-13 15:37:35,507 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-13 15:37:40,878 - __main__ - DEBUG - Webhook called
2025-02-13 15:37:40,878 - __main__ - DEBUG - Webhook body: {'update_id': 647682791, 'message': {'message_id': 15, 'from': {'id': 308526396, 'is_bot': False, 'first_name': 'Naz', 'username': 'nm_2719', 'language_code': 'en', 'is_premium': True}, 'chat': {'id': 308526396, 'first_name': 'Naz', 'username': 'nm_2719', 'type': 'private'}, 'date': 1739457460, 'text': 'yoyoyo'}}
2025-02-13 15:37:40,879 - __main__ - DEBUG - Parsed update: Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Naz', id=308526396, type=<ChatType.PRIVATE>, username='nm_2719'), date=datetime.datetime(2025, 2, 13, 14, 37, 40, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Naz', id=308526396, is_bot=False, is_premium=True, language_code='en', username='nm_2719'), group_chat_created=False, message_id=15, supergroup_chat_created=False, text='yoyoyo'), update_id=647682791)
2025-02-13 15:39:20,608 - asyncio - ERROR - Task was destroyed but it is pending!
task: <Task pending name='Task-4' coro=<update_history_context() running at /Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/utils/context_updater.py:32>>
2025-02-13 15:39:20,608 - asyncio - ERROR - Task was destroyed but it is pending!
task: <Task pending name='Task-5' coro=<periodic_history_analysis() running at /Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/utils/whole_history_analyzer.py:64>>
2025-02-13 15:39:24,084 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-13 15:39:24,084 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `setMyCommands` with parameters `{'commands': [BotCommand(command='start', description='Start the bot'), BotCommand(command='help', description='Show available commands'), BotCommand(command='clear', description='Clear conversation history'), BotCommand(command='session', description='Set session duration'), BotCommand(command='analyze', description='Analyze conversation history')]}`
2025-02-13 15:39:24,087 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-13 15:39:24,155 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x106b563c0>
2025-02-13 15:39:24,156 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x105aecef0> server_hostname='api.telegram.org' timeout=5.0
2025-02-13 15:39:24,197 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x106b45590>
2025-02-13 15:39:24,198 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 15:39:24,198 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 15:39:24,198 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 15:39:24,198 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 15:39:24,198 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 15:39:24,245 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 13 Feb 2025 14:39:24 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-02-13 15:39:24,246 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8050570051:AAG4byICXKPopJ4pkngSfXLBEa7ZnJ4eTrs/setMyCommands "HTTP/1.1 200 OK"
2025-02-13 15:39:24,246 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 15:39:24,246 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 15:39:24,246 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 15:39:24,246 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 15:39:24,246 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `setMyCommands` finished with return value `True`
2025-02-13 15:39:24,247 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-13 15:39:24,248 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-13 15:39:27,014 - __main__ - DEBUG - Webhook called
2025-02-13 15:39:27,014 - __main__ - DEBUG - Webhook body: {'update_id': 647682792, 'message': {'message_id': 16, 'from': {'id': 308526396, 'is_bot': False, 'first_name': 'Naz', 'username': 'nm_2719', 'language_code': 'en', 'is_premium': True}, 'chat': {'id': 308526396, 'first_name': 'Naz', 'username': 'nm_2719', 'type': 'private'}, 'date': 1739457566, 'text': 'hola'}}
2025-02-13 15:39:27,015 - __main__ - DEBUG - Parsed update: Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Naz', id=308526396, type=<ChatType.PRIVATE>, username='nm_2719'), date=datetime.datetime(2025, 2, 13, 14, 39, 26, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Naz', id=308526396, is_bot=False, is_premium=True, language_code='en', username='nm_2719'), group_chat_created=False, message_id=16, supergroup_chat_created=False, text='hola'), update_id=647682792)
2025-02-13 15:39:40,118 - __main__ - DEBUG - Webhook called
2025-02-13 15:39:40,119 - __main__ - DEBUG - Webhook body: {'update_id': 647682793, 'message': {'message_id': 17, 'from': {'id': 308526396, 'is_bot': False, 'first_name': 'Naz', 'username': 'nm_2719', 'language_code': 'en', 'is_premium': True}, 'chat': {'id': 308526396, 'first_name': 'Naz', 'username': 'nm_2719', 'type': 'private'}, 'date': 1739457580, 'text': '@dildong are you there?', 'entities': [{'offset': 0, 'length': 8, 'type': 'mention'}]}}
2025-02-13 15:39:40,119 - __main__ - DEBUG - Parsed update: Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Naz', id=308526396, type=<ChatType.PRIVATE>, username='nm_2719'), date=datetime.datetime(2025, 2, 13, 14, 39, 40, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=8, offset=0, type=<MessageEntityType.MENTION>),), from_user=User(first_name='Naz', id=308526396, is_bot=False, is_premium=True, language_code='en', username='nm_2719'), group_chat_created=False, message_id=17, supergroup_chat_created=False, text='@dildong are you there?'), update_id=647682793)
2025-02-13 15:41:36,491 - asyncio - ERROR - Task was destroyed but it is pending!
task: <Task pending name='Task-4' coro=<update_history_context() running at /Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/utils/context_updater.py:32>>
2025-02-13 15:41:36,492 - asyncio - ERROR - Task was destroyed but it is pending!
task: <Task pending name='Task-5' coro=<periodic_history_analysis() running at /Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/utils/whole_history_analyzer.py:64>>
2025-02-13 15:41:38,284 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-13 15:41:38,287 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `setMyCommands` with parameters `{'commands': [BotCommand(command='start', description='Start the bot'), BotCommand(command='help', description='Show available commands'), BotCommand(command='clear', description='Clear conversation history'), BotCommand(command='session', description='Set session duration'), BotCommand(command='analyze', description='Analyze conversation history')]}`
2025-02-13 15:41:38,289 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-13 15:41:38,333 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x115c53a10>
2025-02-13 15:41:38,333 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1106d8f80> server_hostname='api.telegram.org' timeout=5.0
2025-02-13 15:41:38,378 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x115c59f90>
2025-02-13 15:41:38,378 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 15:41:38,378 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 15:41:38,378 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 15:41:38,378 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 15:41:38,378 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 15:41:38,739 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 13 Feb 2025 14:41:38 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-02-13 15:41:38,739 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8050570051:AAG4byICXKPopJ4pkngSfXLBEa7ZnJ4eTrs/setMyCommands "HTTP/1.1 200 OK"
2025-02-13 15:41:38,740 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 15:41:38,740 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 15:41:38,740 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 15:41:38,740 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 15:41:38,740 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `setMyCommands` finished with return value `True`
2025-02-13 15:41:54,887 - __main__ - DEBUG - Webhook called
2025-02-13 15:41:54,887 - __main__ - DEBUG - Webhook body: {'update_id': 647682794, 'message': {'message_id': 18, 'from': {'id': 308526396, 'is_bot': False, 'first_name': 'Naz', 'username': 'nm_2719', 'language_code': 'en', 'is_premium': True}, 'chat': {'id': 308526396, 'first_name': 'Naz', 'username': 'nm_2719', 'type': 'private'}, 'date': 1739457714, 'text': 'Yoo!'}}
2025-02-13 15:41:54,887 - __main__ - DEBUG - Message text: Yoo!
2025-02-13 15:41:54,887 - __main__ - DEBUG - From user: nm_2719
2025-02-13 15:41:54,888 - __main__ - DEBUG - Parsed update: Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Naz', id=308526396, type=<ChatType.PRIVATE>, username='nm_2719'), date=datetime.datetime(2025, 2, 13, 14, 41, 54, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Naz', id=308526396, is_bot=False, is_premium=True, language_code='en', username='nm_2719'), group_chat_created=False, message_id=18, supergroup_chat_created=False, text='Yoo!'), update_id=647682794)
2025-02-13 15:41:54,888 - __main__ - DEBUG - Update added to queue successfully
2025-02-13 15:48:03,407 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-13 15:48:03,409 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `setMyCommands` with parameters `{'commands': [BotCommand(command='start', description='Start the bot'), BotCommand(command='help', description='Show available commands'), BotCommand(command='clear', description='Clear conversation history'), BotCommand(command='session', description='Set session duration'), BotCommand(command='analyze', description='Analyze conversation history')]}`
2025-02-13 15:48:03,411 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-13 15:48:03,541 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x103e37a10>
2025-02-13 15:48:03,541 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x103cbcef0> server_hostname='api.telegram.org' timeout=5.0
2025-02-13 15:48:03,587 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x103e3df90>
2025-02-13 15:48:03,587 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 15:48:03,588 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 15:48:03,588 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 15:48:03,588 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 15:48:03,588 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 15:48:03,653 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 13 Feb 2025 14:48:03 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-02-13 15:48:03,654 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8050570051:AAG4byICXKPopJ4pkngSfXLBEa7ZnJ4eTrs/setMyCommands "HTTP/1.1 200 OK"
2025-02-13 15:48:03,654 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 15:48:03,654 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 15:48:03,654 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 15:48:03,654 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 15:48:03,654 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `setMyCommands` finished with return value `True`
2025-02-13 15:53:14,482 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-13 15:53:14,485 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getMe` with parameters `{}`
2025-02-13 15:53:14,488 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-13 15:53:14,537 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x103b2f8c0>
2025-02-13 15:53:14,538 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1039aeb10> server_hostname='api.telegram.org' timeout=5.0
2025-02-13 15:53:14,584 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x103b1e210>
2025-02-13 15:53:14,584 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 15:53:14,585 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 15:53:14,585 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 15:53:14,585 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 15:53:14,585 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 15:53:14,625 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 13 Feb 2025 14:53:14 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'248'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-02-13 15:53:14,626 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8050570051:AAG4byICXKPopJ4pkngSfXLBEa7ZnJ4eTrs/getMe "HTTP/1.1 200 OK"
2025-02-13 15:53:14,626 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 15:53:14,626 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 15:53:14,626 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 15:53:14,626 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 15:53:14,626 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getMe` finished with return value `{'id': 8050570051, 'is_bot': True, 'first_name': 'Dildong', 'username': 'Dildong_bot', 'can_join_groups': True, 'can_read_all_group_messages': False, 'supports_inline_queries': False, 'can_connect_to_business': False, 'has_main_web_app': False}`
2025-02-13 15:53:14,626 - telegram.ext.ExtBot - DEBUG - This Bot is already initialized.
2025-02-13 15:53:14,626 - telegram.ext.Application - INFO - Application started
2025-02-13 15:53:14,627 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `setMyCommands` with parameters `{'commands': [BotCommand(command='start', description='Start the bot'), BotCommand(command='help', description='Show available commands'), BotCommand(command='clear', description='Clear conversation history'), BotCommand(command='session', description='Set session duration'), BotCommand(command='analyze', description='Analyze conversation history')]}`
2025-02-13 15:53:14,627 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 15:53:14,627 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 15:53:14,627 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 15:53:14,627 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 15:53:14,627 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 15:53:14,744 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 13 Feb 2025 14:53:14 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-02-13 15:53:14,744 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8050570051:AAG4byICXKPopJ4pkngSfXLBEa7ZnJ4eTrs/setMyCommands "HTTP/1.1 200 OK"
2025-02-13 15:53:14,744 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 15:53:14,744 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 15:53:14,744 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 15:53:14,745 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 15:53:14,745 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `setMyCommands` finished with return value `True`
2025-02-13 15:53:31,815 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful assistant.'}, {'role': 'user', 'content': 'Hello, are you working?'}], 'model': 'gpt-3.5-turbo'}}
2025-02-13 15:53:31,839 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-02-13 15:53:31,840 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-13 15:53:31,889 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x103b85fd0>
2025-02-13 15:53:31,889 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1039acdd0> server_hostname='api.openai.com' timeout=5.0
2025-02-13 15:53:31,918 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x103bc4550>
2025-02-13 15:53:31,918 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 15:53:31,918 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 15:53:31,918 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 15:53:31,918 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 15:53:31,918 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 15:53:32,985 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 429, b'Too Many Requests', [(b'Date', b'Thu, 13 Feb 2025 14:53:32 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'337'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_508b7411c1e0b0378c64a8b217f6c1fd'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=BUUFMujxN2Nr_4tZP4O1TQUqBGFWvgPvqOVgSkcMJa0-1739458412-1.0.1.1-FbB_BkSNBEOmGFYTtUiFWGUB3I5b9kFUIeZeJvU_4i7BJ4Qfzhr3tOSNW2ZZ9JMx.viot9XkJScYlmOBj5VvDA; path=/; expires=Thu, 13-Feb-25 15:23:32 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=5V7h4lGckAJYNDJUq7JqvLlXt19q.A4ZCAnV1l2FcLc-1739458412931-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9115a6029887eca9-MAD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-02-13 15:53:32,986 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 429 Too Many Requests"
2025-02-13 15:53:32,986 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 15:53:32,986 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 15:53:32,986 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 15:53:32,986 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 15:53:32,986 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "429 Too Many Requests" Headers([('date', 'Thu, 13 Feb 2025 14:53:32 GMT'), ('content-type', 'application/json; charset=utf-8'), ('content-length', '337'), ('connection', 'keep-alive'), ('vary', 'Origin'), ('x-request-id', 'req_508b7411c1e0b0378c64a8b217f6c1fd'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=BUUFMujxN2Nr_4tZP4O1TQUqBGFWvgPvqOVgSkcMJa0-1739458412-1.0.1.1-FbB_BkSNBEOmGFYTtUiFWGUB3I5b9kFUIeZeJvU_4i7BJ4Qfzhr3tOSNW2ZZ9JMx.viot9XkJScYlmOBj5VvDA; path=/; expires=Thu, 13-Feb-25 15:23:32 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=5V7h4lGckAJYNDJUq7JqvLlXt19q.A4ZCAnV1l2FcLc-1739458412931-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '9115a6029887eca9-MAD'), ('alt-svc', 'h3=":443"; ma=86400')])
2025-02-13 15:53:32,986 - openai._base_client - DEBUG - request_id: req_508b7411c1e0b0378c64a8b217f6c1fd
2025-02-13 15:53:32,986 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/openai/_base_client.py", line 1050, in _request
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '429 Too Many Requests' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429
2025-02-13 15:53:32,990 - openai._base_client - DEBUG - Retrying due to status code 429
2025-02-13 15:53:32,990 - openai._base_client - DEBUG - 2 retries left
2025-02-13 15:53:32,990 - openai._base_client - INFO - Retrying request to /chat/completions in 0.463617 seconds
2025-02-13 15:53:33,456 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful assistant.'}, {'role': 'user', 'content': 'Hello, are you working?'}], 'model': 'gpt-3.5-turbo'}}
2025-02-13 15:53:33,457 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-02-13 15:53:33,457 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 15:53:33,458 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 15:53:33,458 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 15:53:33,458 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 15:53:33,458 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 15:53:33,743 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 429, b'Too Many Requests', [(b'Date', b'Thu, 13 Feb 2025 14:53:33 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'337'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_ba15a0ffe29e26e0873dc509ef70d8fa'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9115a60c3832eca9-MAD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-02-13 15:53:33,743 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 429 Too Many Requests"
2025-02-13 15:53:33,744 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 15:53:33,744 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 15:53:33,744 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 15:53:33,744 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 15:53:33,744 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "429 Too Many Requests" Headers({'date': 'Thu, 13 Feb 2025 14:53:33 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '337', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_ba15a0ffe29e26e0873dc509ef70d8fa', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '9115a60c3832eca9-MAD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-02-13 15:53:33,744 - openai._base_client - DEBUG - request_id: req_ba15a0ffe29e26e0873dc509ef70d8fa
2025-02-13 15:53:33,744 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/openai/_base_client.py", line 1050, in _request
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '429 Too Many Requests' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/openai/_base_client.py", line 1050, in _request
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '429 Too Many Requests' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429
2025-02-13 15:53:33,746 - openai._base_client - DEBUG - Retrying due to status code 429
2025-02-13 15:53:33,746 - openai._base_client - DEBUG - 1 retry left
2025-02-13 15:53:33,746 - openai._base_client - INFO - Retrying request to /chat/completions in 0.832752 seconds
2025-02-13 15:53:34,584 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful assistant.'}, {'role': 'user', 'content': 'Hello, are you working?'}], 'model': 'gpt-3.5-turbo'}}
2025-02-13 15:53:34,587 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-02-13 15:53:34,587 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 15:53:34,588 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 15:53:34,588 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 15:53:34,589 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 15:53:34,589 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 15:53:34,871 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 429, b'Too Many Requests', [(b'Date', b'Thu, 13 Feb 2025 14:53:34 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'337'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_7b458a42e205224564461610370f027c'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9115a6134a3ceca9-MAD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-02-13 15:53:34,871 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 429 Too Many Requests"
2025-02-13 15:53:34,871 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 15:53:34,871 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 15:53:34,871 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 15:53:34,871 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 15:53:34,871 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "429 Too Many Requests" Headers({'date': 'Thu, 13 Feb 2025 14:53:34 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '337', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_7b458a42e205224564461610370f027c', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '9115a6134a3ceca9-MAD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-02-13 15:53:34,872 - openai._base_client - DEBUG - request_id: req_7b458a42e205224564461610370f027c
2025-02-13 15:53:34,872 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/openai/_base_client.py", line 1050, in _request
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '429 Too Many Requests' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/openai/_base_client.py", line 1050, in _request
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '429 Too Many Requests' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/openai/_base_client.py", line 1050, in _request
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '429 Too Many Requests' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429
2025-02-13 15:53:34,873 - openai._base_client - DEBUG - Re-raising status error
2025-02-13 15:53:34,875 - __main__ - ERROR - OpenAI test error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}
Traceback (most recent call last):
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/bot.py", line 60, in test_openai
    response = await get_chat_response("Hello, are you working?")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/bot.py", line 48, in get_chat_response
    response = await asyncio.to_thread(
               ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/openai/_utils/_utils.py", line 279, in wrapper
    return func(*args, **kwargs)
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/openai/resources/chat/completions.py", line 863, in create
    return self._post(
           ~~~~~~~~~~^
        "/chat/completions",
        ^^^^^^^^^^^^^^^^^^^^
    ...<40 lines>...
        stream_cls=Stream[ChatCompletionChunk],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/openai/_base_client.py", line 1290, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/openai/_base_client.py", line 967, in request
    return self._request(
           ~~~~~~~~~~~~~^
        cast_to=cast_to,
        ^^^^^^^^^^^^^^^^
    ...<3 lines>...
        retries_taken=retries_taken,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/openai/_base_client.py", line 1056, in _request
    return self._retry_request(
           ~~~~~~~~~~~~~~~~~~~^
        input_options,
        ^^^^^^^^^^^^^^
    ...<4 lines>...
        stream_cls=stream_cls,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/openai/_base_client.py", line 1105, in _retry_request
    return self._request(
           ~~~~~~~~~~~~~^
        options=options,
        ^^^^^^^^^^^^^^^^
    ...<3 lines>...
        stream_cls=stream_cls,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/openai/_base_client.py", line 1056, in _request
    return self._retry_request(
           ~~~~~~~~~~~~~~~~~~~^
        input_options,
        ^^^^^^^^^^^^^^
    ...<4 lines>...
        stream_cls=stream_cls,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/openai/_base_client.py", line 1105, in _retry_request
    return self._request(
           ~~~~~~~~~~~~~^
        options=options,
        ^^^^^^^^^^^^^^^^
    ...<3 lines>...
        stream_cls=stream_cls,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/openai/_base_client.py", line 1071, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}
2025-02-13 15:57:49,896 - telegram.ext.Application - INFO - Application is stopping. This might take a moment.
2025-02-13 15:57:49,896 - telegram.ext.Application - DEBUG - Waiting for update_queue to join
2025-02-13 15:57:49,897 - telegram.ext.Application - DEBUG - Application stopped fetching of updates.
2025-02-13 15:57:49,897 - telegram.ext.Application - DEBUG - Waiting for `create_task` calls to be processed
2025-02-13 15:57:49,897 - telegram.ext.Application - INFO - Application.stop() complete
2025-02-13 15:57:49,963 - httpcore.connection - DEBUG - close.started
2025-02-13 15:57:49,964 - httpcore.connection - DEBUG - close.complete
2025-02-13 15:57:51,567 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-13 15:57:51,570 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getMe` with parameters `{}`
2025-02-13 15:57:51,573 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-13 15:57:51,637 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1062f78c0>
2025-02-13 15:57:51,637 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x106176b10> server_hostname='api.telegram.org' timeout=5.0
2025-02-13 15:57:51,679 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1062e6210>
2025-02-13 15:57:51,680 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 15:57:51,680 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 15:57:51,680 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 15:57:51,680 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 15:57:51,680 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 15:57:51,724 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 13 Feb 2025 14:57:51 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'248'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-02-13 15:57:51,724 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8050570051:AAG4byICXKPopJ4pkngSfXLBEa7ZnJ4eTrs/getMe "HTTP/1.1 200 OK"
2025-02-13 15:57:51,724 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 15:57:51,724 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 15:57:51,724 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 15:57:51,725 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 15:57:51,725 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getMe` finished with return value `{'id': 8050570051, 'is_bot': True, 'first_name': 'Dildong', 'username': 'Dildong_bot', 'can_join_groups': True, 'can_read_all_group_messages': False, 'supports_inline_queries': False, 'can_connect_to_business': False, 'has_main_web_app': False}`
2025-02-13 15:57:51,725 - telegram.ext.ExtBot - DEBUG - This Bot is already initialized.
2025-02-13 15:57:51,725 - telegram.ext.Application - INFO - Application started
2025-02-13 15:57:51,725 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `setMyCommands` with parameters `{'commands': [BotCommand(command='start', description='Start the bot'), BotCommand(command='help', description='Show available commands'), BotCommand(command='clear', description='Clear conversation history'), BotCommand(command='session', description='Set session duration'), BotCommand(command='analyze', description='Analyze conversation history')]}`
2025-02-13 15:57:51,725 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 15:57:51,726 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 15:57:51,726 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 15:57:51,726 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 15:57:51,726 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 15:57:51,883 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 13 Feb 2025 14:57:51 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-02-13 15:57:51,883 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8050570051:AAG4byICXKPopJ4pkngSfXLBEa7ZnJ4eTrs/setMyCommands "HTTP/1.1 200 OK"
2025-02-13 15:57:51,883 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 15:57:51,884 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 15:57:51,884 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 15:57:51,884 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 15:57:51,884 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `setMyCommands` finished with return value `True`
2025-02-13 16:03:22,755 - telegram.ext.Application - INFO - Application is stopping. This might take a moment.
2025-02-13 16:03:22,759 - telegram.ext.Application - DEBUG - Waiting for update_queue to join
2025-02-13 16:03:22,760 - telegram.ext.Application - DEBUG - Application stopped fetching of updates.
2025-02-13 16:03:22,760 - telegram.ext.Application - DEBUG - Waiting for `create_task` calls to be processed
2025-02-13 16:03:22,760 - telegram.ext.Application - INFO - Application.stop() complete
2025-02-13 16:04:19,486 - __main__ - INFO - MOCK_MODE is set to: False
2025-02-13 16:04:19,514 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-13 16:04:19,517 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getMe` with parameters `{}`
2025-02-13 16:04:19,520 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-13 16:04:19,596 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x115c5b8c0>
2025-02-13 16:04:19,596 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1107deb10> server_hostname='api.telegram.org' timeout=5.0
2025-02-13 16:04:19,645 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x115c4a210>
2025-02-13 16:04:19,645 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 16:04:19,645 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 16:04:19,646 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 16:04:19,646 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 16:04:19,646 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 16:04:19,683 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 13 Feb 2025 15:04:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'248'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-02-13 16:04:19,684 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8050570051:AAG4byICXKPopJ4pkngSfXLBEa7ZnJ4eTrs/getMe "HTTP/1.1 200 OK"
2025-02-13 16:04:19,684 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 16:04:19,684 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 16:04:19,684 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 16:04:19,684 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 16:04:19,684 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getMe` finished with return value `{'id': 8050570051, 'is_bot': True, 'first_name': 'Dildong', 'username': 'Dildong_bot', 'can_join_groups': True, 'can_read_all_group_messages': False, 'supports_inline_queries': False, 'can_connect_to_business': False, 'has_main_web_app': False}`
2025-02-13 16:04:19,684 - telegram.ext.ExtBot - DEBUG - This Bot is already initialized.
2025-02-13 16:04:19,684 - telegram.ext.Application - INFO - Application started
2025-02-13 16:04:19,684 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `setMyCommands` with parameters `{'commands': [BotCommand(command='start', description='Start the bot'), BotCommand(command='help', description='Show available commands'), BotCommand(command='clear', description='Clear conversation history'), BotCommand(command='session', description='Set session duration'), BotCommand(command='analyze', description='Analyze conversation history')]}`
2025-02-13 16:04:19,685 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 16:04:19,685 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 16:04:19,685 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 16:04:19,685 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 16:04:19,685 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 16:04:19,918 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 13 Feb 2025 15:04:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-02-13 16:04:19,919 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8050570051:AAG4byICXKPopJ4pkngSfXLBEa7ZnJ4eTrs/setMyCommands "HTTP/1.1 200 OK"
2025-02-13 16:04:19,919 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 16:04:19,919 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 16:04:19,919 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 16:04:19,920 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 16:04:19,920 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `setMyCommands` finished with return value `True`
2025-02-13 16:04:28,123 - __main__ - INFO - Received webhook: {'update_id': 647682798, 'message': {'message_id': 22, 'from': {'id': 308526396, 'is_bot': False, 'first_name': 'Naz', 'username': 'nm_2719', 'language_code': 'en', 'is_premium': True}, 'chat': {'id': 308526396, 'first_name': 'Naz', 'username': 'nm_2719', 'type': 'private'}, 'date': 1739459068, 'text': 'test'}}
2025-02-13 16:04:28,124 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Naz', id=308526396, type=<ChatType.PRIVATE>, username='nm_2719'), date=datetime.datetime(2025, 2, 13, 15, 4, 28, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Naz', id=308526396, is_bot=False, is_premium=True, language_code='en', username='nm_2719'), group_chat_created=False, message_id=22, supergroup_chat_created=False, text='test'), update_id=647682798)
2025-02-13 16:04:28,124 - __main__ - INFO - Processing message: test
2025-02-13 16:04:28,128 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful assistant.'}, {'role': 'user', 'content': 'test'}], 'model': 'gpt-3.5-turbo'}}
2025-02-13 16:04:28,152 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-02-13 16:04:28,153 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-13 16:04:28,212 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x115cb16a0>
2025-02-13 16:04:28,212 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1107dcdd0> server_hostname='api.openai.com' timeout=5.0
2025-02-13 16:04:28,234 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x115ce82d0>
2025-02-13 16:04:28,235 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 16:04:28,236 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 16:04:28,236 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 16:04:28,236 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 16:04:28,236 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 16:04:29,408 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 13 Feb 2025 15:04:29 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-jrobrdv8bldfakdoyxdsiky9'), (b'openai-processing-ms', b'458'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'200000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'199973'), (b'x-ratelimit-reset-requests', b'8.64s'), (b'x-ratelimit-reset-tokens', b'7ms'), (b'x-request-id', b'req_47a00010d67ece47805399051bfeeb8f'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=qsamZJKcn.U4CtoevXwGq3BBXwroGtC35dMR2aNqiuM-1739459069-1.0.1.1-fRTg.mwk_k4kjSw7.l0B6sh5QptPKztbeps6CG0LRV_IIlAD8Vg3Jpm2H.msfOLZEhmcrc8ffEOhmooCvYdTtQ; path=/; expires=Thu, 13-Feb-25 15:34:29 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=A5SbwlJBl61NYY4UY_JITJUm296D1rjVbRGyIZwB6ow-1739459069452-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9115b608dbd22fc7-MAD'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-02-13 16:04:29,409 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-02-13 16:04:29,409 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 16:04:29,411 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 16:04:29,411 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 16:04:29,411 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 16:04:29,412 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers([('date', 'Thu, 13 Feb 2025 15:04:29 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'user-jrobrdv8bldfakdoyxdsiky9'), ('openai-processing-ms', '458'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '10000'), ('x-ratelimit-limit-tokens', '200000'), ('x-ratelimit-remaining-requests', '9999'), ('x-ratelimit-remaining-tokens', '199973'), ('x-ratelimit-reset-requests', '8.64s'), ('x-ratelimit-reset-tokens', '7ms'), ('x-request-id', 'req_47a00010d67ece47805399051bfeeb8f'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=qsamZJKcn.U4CtoevXwGq3BBXwroGtC35dMR2aNqiuM-1739459069-1.0.1.1-fRTg.mwk_k4kjSw7.l0B6sh5QptPKztbeps6CG0LRV_IIlAD8Vg3Jpm2H.msfOLZEhmcrc8ffEOhmooCvYdTtQ; path=/; expires=Thu, 13-Feb-25 15:34:29 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=A5SbwlJBl61NYY4UY_JITJUm296D1rjVbRGyIZwB6ow-1739459069452-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '9115b608dbd22fc7-MAD'), ('content-encoding', 'gzip'), ('alt-svc', 'h3=":443"; ma=86400')])
2025-02-13 16:04:29,412 - openai._base_client - DEBUG - request_id: req_47a00010d67ece47805399051bfeeb8f
2025-02-13 16:04:29,417 - __main__ - INFO - Got response: Hello! How can I assist you today?
2025-02-13 16:04:29,418 - __main__ - ERROR - Error in message handler: This object has no bot associated with it. Shortcuts cannot be used.
Traceback (most recent call last):
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/bot.py", line 85, in message_handler
    await update.message.reply_text(response)
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_message.py", line 1767, in reply_text
    chat_id, effective_reply_parameters = await self._parse_quote_arguments(
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        do_quote, quote, reply_to_message_id, reply_parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_message.py", line 1689, in _parse_quote_arguments
    effective_reply_parameters = self._quote(effective_do_quote)
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_message.py", line 1478, in _quote
    if hasattr(self.get_bot(), "defaults") and self.get_bot().defaults:  # type: ignore
               ~~~~~~~~~~~~^^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_telegramobject.py", line 660, in get_bot
    raise RuntimeError(
        "This object has no bot associated with it. Shortcuts cannot be used."
    )
RuntimeError: This object has no bot associated with it. Shortcuts cannot be used.
2025-02-13 16:04:29,422 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/bot.py", line 85, in message_handler
    await update.message.reply_text(response)
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_message.py", line 1767, in reply_text
    chat_id, effective_reply_parameters = await self._parse_quote_arguments(
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        do_quote, quote, reply_to_message_id, reply_parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_message.py", line 1689, in _parse_quote_arguments
    effective_reply_parameters = self._quote(effective_do_quote)
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_message.py", line 1478, in _quote
    if hasattr(self.get_bot(), "defaults") and self.get_bot().defaults:  # type: ignore
               ~~~~~~~~~~~~^^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_telegramobject.py", line 660, in get_bot
    raise RuntimeError(
        "This object has no bot associated with it. Shortcuts cannot be used."
    )
RuntimeError: This object has no bot associated with it. Shortcuts cannot be used.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/ext/_application.py", line 1325, in process_update
    await coroutine
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/ext/_handlers/basehandler.py", line 158, in handle_update
    return await self.callback(update, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/bot.py", line 88, in message_handler
    await update.message.reply_text("An error occurred while processing your message.")
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_message.py", line 1767, in reply_text
    chat_id, effective_reply_parameters = await self._parse_quote_arguments(
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        do_quote, quote, reply_to_message_id, reply_parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_message.py", line 1689, in _parse_quote_arguments
    effective_reply_parameters = self._quote(effective_do_quote)
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_message.py", line 1478, in _quote
    if hasattr(self.get_bot(), "defaults") and self.get_bot().defaults:  # type: ignore
               ~~~~~~~~~~~~^^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_telegramobject.py", line 660, in get_bot
    raise RuntimeError(
        "This object has no bot associated with it. Shortcuts cannot be used."
    )
RuntimeError: This object has no bot associated with it. Shortcuts cannot be used.
2025-02-13 16:04:46,453 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful assistant.'}, {'role': 'user', 'content': 'Hello, are you working?'}], 'model': 'gpt-3.5-turbo'}}
2025-02-13 16:04:46,454 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-02-13 16:04:46,454 - httpcore.connection - DEBUG - close.started
2025-02-13 16:04:46,454 - httpcore.connection - DEBUG - close.complete
2025-02-13 16:04:46,454 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-13 16:04:46,475 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x115ce8a50>
2025-02-13 16:04:46,475 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1107dcdd0> server_hostname='api.openai.com' timeout=5.0
2025-02-13 16:04:46,500 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1161c0640>
2025-02-13 16:04:46,500 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 16:04:46,500 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 16:04:46,500 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 16:04:46,500 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 16:04:46,500 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 16:04:47,348 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 13 Feb 2025 15:04:47 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-jrobrdv8bldfakdoyxdsiky9'), (b'openai-processing-ms', b'448'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'200000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'199968'), (b'x-ratelimit-reset-requests', b'8.64s'), (b'x-ratelimit-reset-tokens', b'9ms'), (b'x-request-id', b'req_a4655dc37c088a79dd2e86e8c4b6f44a'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=LnSHygHnDXrheImCPPpjo4wGNbhZrhGR9GnLzUGiqdg-1739459087-1.0.1.1-xeGtUV3eD8tANss3Se8k_Dvz975W9k28h88K.2D8tgvQlwXeCrtV1V8ZLOiXLqfSvSgWTID73xPAypCZsfM1Pw; path=/; expires=Thu, 13-Feb-25 15:34:47 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=omowZ8DeeJd6MSqxATjfbqe9Fj9MDzH6xeT5zCz12e4-1739459087251-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9115b67b0af169eb-MAD'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-02-13 16:04:47,350 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-02-13 16:04:47,350 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 16:04:47,351 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 16:04:47,351 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 16:04:47,351 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 16:04:47,351 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers([('date', 'Thu, 13 Feb 2025 15:04:47 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'user-jrobrdv8bldfakdoyxdsiky9'), ('openai-processing-ms', '448'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '10000'), ('x-ratelimit-limit-tokens', '200000'), ('x-ratelimit-remaining-requests', '9999'), ('x-ratelimit-remaining-tokens', '199968'), ('x-ratelimit-reset-requests', '8.64s'), ('x-ratelimit-reset-tokens', '9ms'), ('x-request-id', 'req_a4655dc37c088a79dd2e86e8c4b6f44a'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=LnSHygHnDXrheImCPPpjo4wGNbhZrhGR9GnLzUGiqdg-1739459087-1.0.1.1-xeGtUV3eD8tANss3Se8k_Dvz975W9k28h88K.2D8tgvQlwXeCrtV1V8ZLOiXLqfSvSgWTID73xPAypCZsfM1Pw; path=/; expires=Thu, 13-Feb-25 15:34:47 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=omowZ8DeeJd6MSqxATjfbqe9Fj9MDzH6xeT5zCz12e4-1739459087251-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '9115b67b0af169eb-MAD'), ('content-encoding', 'gzip'), ('alt-svc', 'h3=":443"; ma=86400')])
2025-02-13 16:04:47,352 - openai._base_client - DEBUG - request_id: req_a4655dc37c088a79dd2e86e8c4b6f44a
2025-02-13 16:04:56,491 - __main__ - INFO - Received webhook: {'update_id': 647682799, 'message': {'message_id': 23, 'from': {'id': 308526396, 'is_bot': False, 'first_name': 'Naz', 'username': 'nm_2719', 'language_code': 'en', 'is_premium': True}, 'chat': {'id': 308526396, 'first_name': 'Naz', 'username': 'nm_2719', 'type': 'private'}, 'date': 1739459096, 'text': 'Yo'}}
2025-02-13 16:04:56,493 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Naz', id=308526396, type=<ChatType.PRIVATE>, username='nm_2719'), date=datetime.datetime(2025, 2, 13, 15, 4, 56, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Naz', id=308526396, is_bot=False, is_premium=True, language_code='en', username='nm_2719'), group_chat_created=False, message_id=23, supergroup_chat_created=False, text='Yo'), update_id=647682799)
2025-02-13 16:04:56,493 - __main__ - INFO - Processing message: Yo
2025-02-13 16:04:56,496 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful assistant.'}, {'role': 'user', 'content': 'Yo'}], 'model': 'gpt-3.5-turbo'}}
2025-02-13 16:04:56,496 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-02-13 16:04:56,496 - httpcore.connection - DEBUG - close.started
2025-02-13 16:04:56,496 - httpcore.connection - DEBUG - close.complete
2025-02-13 16:04:56,496 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-13 16:04:56,524 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1161c0e90>
2025-02-13 16:04:56,524 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1107dcdd0> server_hostname='api.openai.com' timeout=5.0
2025-02-13 16:04:56,548 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x115c43bf0>
2025-02-13 16:04:56,549 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 16:04:56,549 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 16:04:56,549 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 16:04:56,549 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 16:04:56,549 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 16:04:57,255 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 13 Feb 2025 15:04:57 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-jrobrdv8bldfakdoyxdsiky9'), (b'openai-processing-ms', b'486'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'200000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'199973'), (b'x-ratelimit-reset-requests', b'8.64s'), (b'x-ratelimit-reset-tokens', b'7ms'), (b'x-request-id', b'req_1947f63edb6b38f42faa6c097ef9ee7d'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=838s27_m_cwl_YMiVwqKP3HTc..syKPHMXk1VCvEmUw-1739459097-1.0.1.1-Mm_XgJnsniXh6RJ.8lWyEPfLvqzIaybDLCgUboXx9Ry_C4D.sjc60dyYZBlx9TGK6hu2EF9AEYxz8HJkEUDzuw; path=/; expires=Thu, 13-Feb-25 15:34:57 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=1W0a5WhRGbpSIZ2iP0G03eljiCTIyKGJjsIv7x4GGZc-1739459097297-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9115b6b9d8b60345-MAD'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-02-13 16:04:57,256 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-02-13 16:04:57,256 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 16:04:57,300 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 16:04:57,300 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 16:04:57,300 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 16:04:57,300 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers([('date', 'Thu, 13 Feb 2025 15:04:57 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'user-jrobrdv8bldfakdoyxdsiky9'), ('openai-processing-ms', '486'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '10000'), ('x-ratelimit-limit-tokens', '200000'), ('x-ratelimit-remaining-requests', '9999'), ('x-ratelimit-remaining-tokens', '199973'), ('x-ratelimit-reset-requests', '8.64s'), ('x-ratelimit-reset-tokens', '7ms'), ('x-request-id', 'req_1947f63edb6b38f42faa6c097ef9ee7d'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=838s27_m_cwl_YMiVwqKP3HTc..syKPHMXk1VCvEmUw-1739459097-1.0.1.1-Mm_XgJnsniXh6RJ.8lWyEPfLvqzIaybDLCgUboXx9Ry_C4D.sjc60dyYZBlx9TGK6hu2EF9AEYxz8HJkEUDzuw; path=/; expires=Thu, 13-Feb-25 15:34:57 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=1W0a5WhRGbpSIZ2iP0G03eljiCTIyKGJjsIv7x4GGZc-1739459097297-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '9115b6b9d8b60345-MAD'), ('content-encoding', 'gzip'), ('alt-svc', 'h3=":443"; ma=86400')])
2025-02-13 16:04:57,300 - openai._base_client - DEBUG - request_id: req_1947f63edb6b38f42faa6c097ef9ee7d
2025-02-13 16:04:57,301 - __main__ - INFO - Got response: Hello! How can I assist you today?
2025-02-13 16:04:57,301 - __main__ - ERROR - Error in message handler: This object has no bot associated with it. Shortcuts cannot be used.
Traceback (most recent call last):
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/bot.py", line 85, in message_handler
    await update.message.reply_text(response)
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_message.py", line 1767, in reply_text
    chat_id, effective_reply_parameters = await self._parse_quote_arguments(
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        do_quote, quote, reply_to_message_id, reply_parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_message.py", line 1689, in _parse_quote_arguments
    effective_reply_parameters = self._quote(effective_do_quote)
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_message.py", line 1478, in _quote
    if hasattr(self.get_bot(), "defaults") and self.get_bot().defaults:  # type: ignore
               ~~~~~~~~~~~~^^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_telegramobject.py", line 660, in get_bot
    raise RuntimeError(
        "This object has no bot associated with it. Shortcuts cannot be used."
    )
RuntimeError: This object has no bot associated with it. Shortcuts cannot be used.
2025-02-13 16:04:57,302 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/bot.py", line 85, in message_handler
    await update.message.reply_text(response)
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_message.py", line 1767, in reply_text
    chat_id, effective_reply_parameters = await self._parse_quote_arguments(
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        do_quote, quote, reply_to_message_id, reply_parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_message.py", line 1689, in _parse_quote_arguments
    effective_reply_parameters = self._quote(effective_do_quote)
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_message.py", line 1478, in _quote
    if hasattr(self.get_bot(), "defaults") and self.get_bot().defaults:  # type: ignore
               ~~~~~~~~~~~~^^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_telegramobject.py", line 660, in get_bot
    raise RuntimeError(
        "This object has no bot associated with it. Shortcuts cannot be used."
    )
RuntimeError: This object has no bot associated with it. Shortcuts cannot be used.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/ext/_application.py", line 1325, in process_update
    await coroutine
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/ext/_handlers/basehandler.py", line 158, in handle_update
    return await self.callback(update, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/bot.py", line 88, in message_handler
    await update.message.reply_text("An error occurred while processing your message.")
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_message.py", line 1767, in reply_text
    chat_id, effective_reply_parameters = await self._parse_quote_arguments(
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        do_quote, quote, reply_to_message_id, reply_parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_message.py", line 1689, in _parse_quote_arguments
    effective_reply_parameters = self._quote(effective_do_quote)
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_message.py", line 1478, in _quote
    if hasattr(self.get_bot(), "defaults") and self.get_bot().defaults:  # type: ignore
               ~~~~~~~~~~~~^^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_telegramobject.py", line 660, in get_bot
    raise RuntimeError(
        "This object has no bot associated with it. Shortcuts cannot be used."
    )
RuntimeError: This object has no bot associated with it. Shortcuts cannot be used.
2025-02-13 16:05:20,103 - telegram.ext.Application - INFO - Application is stopping. This might take a moment.
2025-02-13 16:05:20,104 - telegram.ext.Application - DEBUG - Waiting for update_queue to join
2025-02-13 16:05:20,104 - telegram.ext.Application - DEBUG - Application stopped fetching of updates.
2025-02-13 16:05:20,104 - telegram.ext.Application - DEBUG - Waiting for `create_task` calls to be processed
2025-02-13 16:05:20,104 - telegram.ext.Application - INFO - Application.stop() complete
2025-02-13 16:05:20,141 - httpcore.connection - DEBUG - close.started
2025-02-13 16:05:20,141 - httpcore.connection - DEBUG - close.complete
2025-02-13 16:05:21,579 - __main__ - INFO - MOCK_MODE is set to: False
2025-02-13 16:05:21,606 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-13 16:05:21,609 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getMe` with parameters `{}`
2025-02-13 16:05:21,612 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-13 16:05:21,651 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10a15b8c0>
2025-02-13 16:05:21,651 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x104cdeb10> server_hostname='api.telegram.org' timeout=5.0
2025-02-13 16:05:21,691 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10a14a210>
2025-02-13 16:05:21,693 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 16:05:21,693 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 16:05:21,693 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 16:05:21,693 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 16:05:21,693 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 16:05:21,732 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 13 Feb 2025 15:05:21 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'248'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-02-13 16:05:21,732 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8050570051:AAG4byICXKPopJ4pkngSfXLBEa7ZnJ4eTrs/getMe "HTTP/1.1 200 OK"
2025-02-13 16:05:21,732 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 16:05:21,733 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 16:05:21,733 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 16:05:21,733 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 16:05:21,733 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getMe` finished with return value `{'id': 8050570051, 'is_bot': True, 'first_name': 'Dildong', 'username': 'Dildong_bot', 'can_join_groups': True, 'can_read_all_group_messages': False, 'supports_inline_queries': False, 'can_connect_to_business': False, 'has_main_web_app': False}`
2025-02-13 16:05:21,733 - telegram.ext.ExtBot - DEBUG - This Bot is already initialized.
2025-02-13 16:05:21,733 - telegram.ext.Application - INFO - Application started
2025-02-13 16:05:21,733 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `setMyCommands` with parameters `{'commands': [BotCommand(command='start', description='Start the bot'), BotCommand(command='help', description='Show available commands'), BotCommand(command='clear', description='Clear conversation history'), BotCommand(command='session', description='Set session duration'), BotCommand(command='analyze', description='Analyze conversation history')]}`
2025-02-13 16:05:21,734 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 16:05:21,734 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 16:05:21,734 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 16:05:21,734 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 16:05:21,734 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 16:05:21,779 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 13 Feb 2025 15:05:21 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-02-13 16:05:21,779 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8050570051:AAG4byICXKPopJ4pkngSfXLBEa7ZnJ4eTrs/setMyCommands "HTTP/1.1 200 OK"
2025-02-13 16:05:21,779 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 16:05:21,779 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 16:05:21,779 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 16:05:21,779 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 16:05:21,779 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `setMyCommands` finished with return value `True`
2025-02-13 16:05:32,454 - __main__ - INFO - Received webhook: {'update_id': 647682800, 'message': {'message_id': 24, 'from': {'id': 308526396, 'is_bot': False, 'first_name': 'Naz', 'username': 'nm_2719', 'language_code': 'en', 'is_premium': True}, 'chat': {'id': 308526396, 'first_name': 'Naz', 'username': 'nm_2719', 'type': 'private'}, 'date': 1739459132, 'text': 'test'}}
2025-02-13 16:05:32,455 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Naz', id=308526396, type=<ChatType.PRIVATE>, username='nm_2719'), date=datetime.datetime(2025, 2, 13, 15, 5, 32, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Naz', id=308526396, is_bot=False, is_premium=True, language_code='en', username='nm_2719'), group_chat_created=False, message_id=24, supergroup_chat_created=False, text='test'), update_id=647682800)
2025-02-13 16:05:32,456 - __main__ - INFO - Processing message: test
2025-02-13 16:05:32,459 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful assistant.'}, {'role': 'user', 'content': 'test'}], 'model': 'gpt-3.5-turbo'}}
2025-02-13 16:05:32,478 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-02-13 16:05:32,478 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-13 16:05:32,523 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10a1b16a0>
2025-02-13 16:05:32,523 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x104cdcdd0> server_hostname='api.openai.com' timeout=5.0
2025-02-13 16:05:32,548 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10a1e82d0>
2025-02-13 16:05:32,549 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 16:05:32,549 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 16:05:32,549 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 16:05:32,550 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 16:05:32,550 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 16:05:33,139 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 13 Feb 2025 15:05:33 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-jrobrdv8bldfakdoyxdsiky9'), (b'openai-processing-ms', b'411'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'200000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'199973'), (b'x-ratelimit-reset-requests', b'8.64s'), (b'x-ratelimit-reset-tokens', b'7ms'), (b'x-request-id', b'req_d5a3992accc4044e9153bde65ab2a411'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=60vkA7u0F1cUnHnZaq8T0EtvFGc_i4A9IuiALeGMcIU-1739459133-1.0.1.1-CumZb4CisIqb6Z6SizPf8gvHN_z5ngo1fRLFmX632gybAcUwBmCoT66fb5wIcd9mSUbk6sLv8Wqu6dN5UWjVvA; path=/; expires=Thu, 13-Feb-25 15:35:33 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=Zak4pk9HBr6wjlmMji05khcierGPqRu82ij_5z5jLoo-1739459133179-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9115b79adc6a2f8d-MAD'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-02-13 16:05:33,142 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-02-13 16:05:33,142 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 16:05:33,152 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 16:05:33,153 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 16:05:33,153 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 16:05:33,153 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers([('date', 'Thu, 13 Feb 2025 15:05:33 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'user-jrobrdv8bldfakdoyxdsiky9'), ('openai-processing-ms', '411'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '10000'), ('x-ratelimit-limit-tokens', '200000'), ('x-ratelimit-remaining-requests', '9999'), ('x-ratelimit-remaining-tokens', '199973'), ('x-ratelimit-reset-requests', '8.64s'), ('x-ratelimit-reset-tokens', '7ms'), ('x-request-id', 'req_d5a3992accc4044e9153bde65ab2a411'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=60vkA7u0F1cUnHnZaq8T0EtvFGc_i4A9IuiALeGMcIU-1739459133-1.0.1.1-CumZb4CisIqb6Z6SizPf8gvHN_z5ngo1fRLFmX632gybAcUwBmCoT66fb5wIcd9mSUbk6sLv8Wqu6dN5UWjVvA; path=/; expires=Thu, 13-Feb-25 15:35:33 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=Zak4pk9HBr6wjlmMji05khcierGPqRu82ij_5z5jLoo-1739459133179-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '9115b79adc6a2f8d-MAD'), ('content-encoding', 'gzip'), ('alt-svc', 'h3=":443"; ma=86400')])
2025-02-13 16:05:33,153 - openai._base_client - DEBUG - request_id: req_d5a3992accc4044e9153bde65ab2a411
2025-02-13 16:05:33,160 - __main__ - INFO - Got response: Hello! How can I assist you today?
2025-02-13 16:05:33,160 - __main__ - ERROR - Error in message handler: This object has no bot associated with it. Shortcuts cannot be used.
Traceback (most recent call last):
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/bot.py", line 85, in message_handler
    await update.message.reply_text(response)
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_message.py", line 1767, in reply_text
    chat_id, effective_reply_parameters = await self._parse_quote_arguments(
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        do_quote, quote, reply_to_message_id, reply_parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_message.py", line 1689, in _parse_quote_arguments
    effective_reply_parameters = self._quote(effective_do_quote)
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_message.py", line 1478, in _quote
    if hasattr(self.get_bot(), "defaults") and self.get_bot().defaults:  # type: ignore
               ~~~~~~~~~~~~^^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_telegramobject.py", line 660, in get_bot
    raise RuntimeError(
        "This object has no bot associated with it. Shortcuts cannot be used."
    )
RuntimeError: This object has no bot associated with it. Shortcuts cannot be used.
2025-02-13 16:05:33,166 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/bot.py", line 85, in message_handler
    await update.message.reply_text(response)
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_message.py", line 1767, in reply_text
    chat_id, effective_reply_parameters = await self._parse_quote_arguments(
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        do_quote, quote, reply_to_message_id, reply_parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_message.py", line 1689, in _parse_quote_arguments
    effective_reply_parameters = self._quote(effective_do_quote)
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_message.py", line 1478, in _quote
    if hasattr(self.get_bot(), "defaults") and self.get_bot().defaults:  # type: ignore
               ~~~~~~~~~~~~^^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_telegramobject.py", line 660, in get_bot
    raise RuntimeError(
        "This object has no bot associated with it. Shortcuts cannot be used."
    )
RuntimeError: This object has no bot associated with it. Shortcuts cannot be used.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/ext/_application.py", line 1325, in process_update
    await coroutine
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/ext/_handlers/basehandler.py", line 158, in handle_update
    return await self.callback(update, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/bot.py", line 88, in message_handler
    await update.message.reply_text("An error occurred while processing your message.")
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_message.py", line 1767, in reply_text
    chat_id, effective_reply_parameters = await self._parse_quote_arguments(
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        do_quote, quote, reply_to_message_id, reply_parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_message.py", line 1689, in _parse_quote_arguments
    effective_reply_parameters = self._quote(effective_do_quote)
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_message.py", line 1478, in _quote
    if hasattr(self.get_bot(), "defaults") and self.get_bot().defaults:  # type: ignore
               ~~~~~~~~~~~~^^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_telegramobject.py", line 660, in get_bot
    raise RuntimeError(
        "This object has no bot associated with it. Shortcuts cannot be used."
    )
RuntimeError: This object has no bot associated with it. Shortcuts cannot be used.
2025-02-13 16:05:40,812 - telegram.ext.Application - INFO - Application is stopping. This might take a moment.
2025-02-13 16:05:40,812 - telegram.ext.Application - DEBUG - Waiting for update_queue to join
2025-02-13 16:05:40,812 - telegram.ext.Application - DEBUG - Application stopped fetching of updates.
2025-02-13 16:05:40,812 - telegram.ext.Application - DEBUG - Waiting for `create_task` calls to be processed
2025-02-13 16:05:40,813 - telegram.ext.Application - INFO - Application.stop() complete
2025-02-13 16:05:40,882 - httpcore.connection - DEBUG - close.started
2025-02-13 16:05:40,882 - httpcore.connection - DEBUG - close.complete
2025-02-13 16:06:01,661 - __main__ - INFO - MOCK_MODE is set to: False
2025-02-13 16:06:01,689 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-13 16:06:01,693 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getMe` with parameters `{}`
2025-02-13 16:06:01,695 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-13 16:06:01,738 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10819f8c0>
2025-02-13 16:06:01,738 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10801eb10> server_hostname='api.telegram.org' timeout=5.0
2025-02-13 16:06:01,781 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10818e210>
2025-02-13 16:06:01,781 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 16:06:01,781 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 16:06:01,781 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 16:06:01,781 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 16:06:01,781 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 16:06:01,822 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 13 Feb 2025 15:06:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'248'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-02-13 16:06:01,823 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8050570051:AAG4byICXKPopJ4pkngSfXLBEa7ZnJ4eTrs/getMe "HTTP/1.1 200 OK"
2025-02-13 16:06:01,823 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 16:06:01,823 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 16:06:01,823 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 16:06:01,823 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 16:06:01,823 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getMe` finished with return value `{'id': 8050570051, 'is_bot': True, 'first_name': 'Dildong', 'username': 'Dildong_bot', 'can_join_groups': True, 'can_read_all_group_messages': False, 'supports_inline_queries': False, 'can_connect_to_business': False, 'has_main_web_app': False}`
2025-02-13 16:06:01,823 - telegram.ext.ExtBot - DEBUG - This Bot is already initialized.
2025-02-13 16:06:01,823 - telegram.ext.Application - INFO - Application started
2025-02-13 16:06:01,824 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `setMyCommands` with parameters `{'commands': [BotCommand(command='start', description='Start the bot'), BotCommand(command='help', description='Show available commands'), BotCommand(command='clear', description='Clear conversation history'), BotCommand(command='session', description='Set session duration'), BotCommand(command='analyze', description='Analyze conversation history')]}`
2025-02-13 16:06:01,824 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 16:06:01,824 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 16:06:01,824 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 16:06:01,824 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 16:06:01,824 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 16:06:01,875 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 13 Feb 2025 15:06:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-02-13 16:06:01,875 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8050570051:AAG4byICXKPopJ4pkngSfXLBEa7ZnJ4eTrs/setMyCommands "HTTP/1.1 200 OK"
2025-02-13 16:06:01,875 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 16:06:01,875 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 16:06:01,875 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 16:06:01,875 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 16:06:01,875 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `setMyCommands` finished with return value `True`
2025-02-13 16:06:07,326 - __main__ - INFO - Received webhook: {'update_id': 647682801, 'message': {'message_id': 25, 'from': {'id': 308526396, 'is_bot': False, 'first_name': 'Naz', 'username': 'nm_2719', 'language_code': 'en', 'is_premium': True}, 'chat': {'id': 308526396, 'first_name': 'Naz', 'username': 'nm_2719', 'type': 'private'}, 'date': 1739459167, 'text': 'yo'}}
2025-02-13 16:06:07,327 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Naz', id=308526396, type=<ChatType.PRIVATE>, username='nm_2719'), date=datetime.datetime(2025, 2, 13, 15, 6, 7, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Naz', id=308526396, is_bot=False, is_premium=True, language_code='en', username='nm_2719'), group_chat_created=False, message_id=25, supergroup_chat_created=False, text='yo'), update_id=647682801)
2025-02-13 16:06:07,328 - __main__ - INFO - Processing message: yo
2025-02-13 16:06:07,332 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful assistant.'}, {'role': 'user', 'content': 'yo'}], 'model': 'gpt-3.5-turbo'}}
2025-02-13 16:06:07,355 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-02-13 16:06:07,355 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-13 16:06:07,375 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1081f56a0>
2025-02-13 16:06:07,375 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10801cdd0> server_hostname='api.openai.com' timeout=5.0
2025-02-13 16:06:07,399 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10822c2d0>
2025-02-13 16:06:07,399 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 16:06:07,399 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 16:06:07,399 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 16:06:07,399 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 16:06:07,399 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 16:06:07,925 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 13 Feb 2025 15:06:07 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-jrobrdv8bldfakdoyxdsiky9'), (b'openai-processing-ms', b'347'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'200000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'199973'), (b'x-ratelimit-reset-requests', b'8.64s'), (b'x-ratelimit-reset-tokens', b'7ms'), (b'x-request-id', b'req_1e0743687665017249eec698262f759a'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=0l_ROasqnlN3gxfN7EacXlq5_aFhVlaXOlrmwoQgMzs-1739459167-1.0.1.1-MRH8kYWYscSLFtjNqflBubOsiLzZh16s1FEFN3bfG2Xu0OT5uCjYYVsM2aHAu63aj9T.KhDLr9dLjiQIKfn5Yg; path=/; expires=Thu, 13-Feb-25 15:36:07 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=XqU1chI2XP4tjkStKkKMkQm0fB2kuYO.N535TKY0XrM-1739459167970-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9115b874aaefcbcf-MAD'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-02-13 16:06:07,926 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-02-13 16:06:07,926 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 16:06:07,936 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 16:06:07,936 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 16:06:07,936 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 16:06:07,936 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers([('date', 'Thu, 13 Feb 2025 15:06:07 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'user-jrobrdv8bldfakdoyxdsiky9'), ('openai-processing-ms', '347'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '10000'), ('x-ratelimit-limit-tokens', '200000'), ('x-ratelimit-remaining-requests', '9999'), ('x-ratelimit-remaining-tokens', '199973'), ('x-ratelimit-reset-requests', '8.64s'), ('x-ratelimit-reset-tokens', '7ms'), ('x-request-id', 'req_1e0743687665017249eec698262f759a'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=0l_ROasqnlN3gxfN7EacXlq5_aFhVlaXOlrmwoQgMzs-1739459167-1.0.1.1-MRH8kYWYscSLFtjNqflBubOsiLzZh16s1FEFN3bfG2Xu0OT5uCjYYVsM2aHAu63aj9T.KhDLr9dLjiQIKfn5Yg; path=/; expires=Thu, 13-Feb-25 15:36:07 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=XqU1chI2XP4tjkStKkKMkQm0fB2kuYO.N535TKY0XrM-1739459167970-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '9115b874aaefcbcf-MAD'), ('content-encoding', 'gzip'), ('alt-svc', 'h3=":443"; ma=86400')])
2025-02-13 16:06:07,937 - openai._base_client - DEBUG - request_id: req_1e0743687665017249eec698262f759a
2025-02-13 16:06:07,943 - __main__ - INFO - Got response: Hello! How can I assist you today?
2025-02-13 16:06:07,943 - __main__ - ERROR - Error in message handler: This object has no bot associated with it. Shortcuts cannot be used.
Traceback (most recent call last):
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/bot.py", line 85, in message_handler
    await update.message.reply_text(response)
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_message.py", line 1767, in reply_text
    chat_id, effective_reply_parameters = await self._parse_quote_arguments(
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        do_quote, quote, reply_to_message_id, reply_parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_message.py", line 1689, in _parse_quote_arguments
    effective_reply_parameters = self._quote(effective_do_quote)
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_message.py", line 1478, in _quote
    if hasattr(self.get_bot(), "defaults") and self.get_bot().defaults:  # type: ignore
               ~~~~~~~~~~~~^^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_telegramobject.py", line 660, in get_bot
    raise RuntimeError(
        "This object has no bot associated with it. Shortcuts cannot be used."
    )
RuntimeError: This object has no bot associated with it. Shortcuts cannot be used.
2025-02-13 16:06:07,947 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/bot.py", line 85, in message_handler
    await update.message.reply_text(response)
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_message.py", line 1767, in reply_text
    chat_id, effective_reply_parameters = await self._parse_quote_arguments(
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        do_quote, quote, reply_to_message_id, reply_parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_message.py", line 1689, in _parse_quote_arguments
    effective_reply_parameters = self._quote(effective_do_quote)
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_message.py", line 1478, in _quote
    if hasattr(self.get_bot(), "defaults") and self.get_bot().defaults:  # type: ignore
               ~~~~~~~~~~~~^^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_telegramobject.py", line 660, in get_bot
    raise RuntimeError(
        "This object has no bot associated with it. Shortcuts cannot be used."
    )
RuntimeError: This object has no bot associated with it. Shortcuts cannot be used.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/ext/_application.py", line 1325, in process_update
    await coroutine
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/ext/_handlers/basehandler.py", line 158, in handle_update
    return await self.callback(update, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/bot.py", line 88, in message_handler
    await update.message.reply_text("An error occurred while processing your message.")
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_message.py", line 1767, in reply_text
    chat_id, effective_reply_parameters = await self._parse_quote_arguments(
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        do_quote, quote, reply_to_message_id, reply_parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_message.py", line 1689, in _parse_quote_arguments
    effective_reply_parameters = self._quote(effective_do_quote)
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_message.py", line 1478, in _quote
    if hasattr(self.get_bot(), "defaults") and self.get_bot().defaults:  # type: ignore
               ~~~~~~~~~~~~^^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_telegramobject.py", line 660, in get_bot
    raise RuntimeError(
        "This object has no bot associated with it. Shortcuts cannot be used."
    )
RuntimeError: This object has no bot associated with it. Shortcuts cannot be used.
2025-02-13 16:06:48,483 - __main__ - INFO - Received webhook: {'update_id': 647682802, 'message': {'message_id': 26, 'from': {'id': 308526396, 'is_bot': False, 'first_name': 'Naz', 'username': 'nm_2719', 'language_code': 'en', 'is_premium': True}, 'chat': {'id': 308526396, 'first_name': 'Naz', 'username': 'nm_2719', 'type': 'private'}, 'date': 1739459208, 'text': '/help', 'entities': [{'offset': 0, 'length': 5, 'type': 'bot_command'}]}}
2025-02-13 16:06:48,483 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Naz', id=308526396, type=<ChatType.PRIVATE>, username='nm_2719'), date=datetime.datetime(2025, 2, 13, 15, 6, 48, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=5, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Naz', id=308526396, is_bot=False, is_premium=True, language_code='en', username='nm_2719'), group_chat_created=False, message_id=26, supergroup_chat_created=False, text='/help'), update_id=647682802)
2025-02-13 16:06:48,483 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/ext/_application.py", line 1289, in process_update
    check = handler.check_update(update)  # Should the handler handle this update?
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/ext/_handlers/commandhandler.py", line 188, in check_update
    and message.get_bot()
        ~~~~~~~~~~~~~~~^^
  File "/Users/nazar/Library/Mobile Documents/com~apple~CloudDocs/Code project/PykhBrain/venv/lib/python3.13/site-packages/telegram/_telegramobject.py", line 660, in get_bot
    raise RuntimeError(
        "This object has no bot associated with it. Shortcuts cannot be used."
    )
RuntimeError: This object has no bot associated with it. Shortcuts cannot be used.
2025-02-13 16:07:59,344 - telegram.ext.Application - INFO - Application is stopping. This might take a moment.
2025-02-13 16:07:59,344 - telegram.ext.Application - DEBUG - Waiting for update_queue to join
2025-02-13 16:07:59,344 - telegram.ext.Application - DEBUG - Application stopped fetching of updates.
2025-02-13 16:07:59,345 - telegram.ext.Application - DEBUG - Waiting for `create_task` calls to be processed
2025-02-13 16:07:59,345 - telegram.ext.Application - INFO - Application.stop() complete
2025-02-13 16:07:59,392 - httpcore.connection - DEBUG - close.started
2025-02-13 16:07:59,393 - httpcore.connection - DEBUG - close.complete
2025-02-13 16:08:01,788 - __main__ - INFO - MOCK_MODE is set to: False
2025-02-13 16:08:01,814 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-13 16:08:01,817 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getMe` with parameters `{}`
2025-02-13 16:08:01,819 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-13 16:08:01,865 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10540f8c0>
2025-02-13 16:08:01,866 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10528eb10> server_hostname='api.telegram.org' timeout=5.0
2025-02-13 16:08:01,912 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1053fe210>
2025-02-13 16:08:01,912 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 16:08:01,912 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 16:08:01,912 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 16:08:01,912 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 16:08:01,912 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 16:08:01,985 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 13 Feb 2025 15:08:02 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'248'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-02-13 16:08:01,985 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8050570051:AAG4byICXKPopJ4pkngSfXLBEa7ZnJ4eTrs/getMe "HTTP/1.1 200 OK"
2025-02-13 16:08:01,986 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 16:08:01,986 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 16:08:01,986 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 16:08:01,986 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 16:08:01,986 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getMe` finished with return value `{'id': 8050570051, 'is_bot': True, 'first_name': 'Dildong', 'username': 'Dildong_bot', 'can_join_groups': True, 'can_read_all_group_messages': False, 'supports_inline_queries': False, 'can_connect_to_business': False, 'has_main_web_app': False}`
2025-02-13 16:08:01,986 - telegram.ext.ExtBot - DEBUG - This Bot is already initialized.
2025-02-13 16:08:01,986 - telegram.ext.Application - INFO - Application started
2025-02-13 16:08:01,986 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `setMyCommands` with parameters `{'commands': [BotCommand(command='start', description='Start the bot'), BotCommand(command='help', description='Show available commands'), BotCommand(command='clear', description='Clear conversation history'), BotCommand(command='session', description='Set session duration'), BotCommand(command='analyze', description='Analyze conversation history')]}`
2025-02-13 16:08:01,987 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 16:08:01,987 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 16:08:01,987 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 16:08:01,987 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 16:08:01,987 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 16:08:02,160 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 13 Feb 2025 15:08:02 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-02-13 16:08:02,162 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8050570051:AAG4byICXKPopJ4pkngSfXLBEa7ZnJ4eTrs/setMyCommands "HTTP/1.1 200 OK"
2025-02-13 16:08:02,162 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 16:08:02,162 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 16:08:02,163 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 16:08:02,163 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 16:08:02,164 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `setMyCommands` finished with return value `True`
2025-02-13 16:08:27,977 - __main__ - INFO - Received webhook: {'update_id': 647682803, 'message': {'message_id': 27, 'from': {'id': 308526396, 'is_bot': False, 'first_name': 'Naz', 'username': 'nm_2719', 'language_code': 'en', 'is_premium': True}, 'chat': {'id': 308526396, 'first_name': 'Naz', 'username': 'nm_2719', 'type': 'private'}, 'date': 1739459307, 'text': 'hola'}}
2025-02-13 16:08:27,978 - __main__ - INFO - Created update object: Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Naz', id=308526396, type=<ChatType.PRIVATE>, username='nm_2719'), date=datetime.datetime(2025, 2, 13, 15, 8, 27, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Naz', id=308526396, is_bot=False, is_premium=True, language_code='en', username='nm_2719'), group_chat_created=False, message_id=27, supergroup_chat_created=False, text='hola'), update_id=647682803)
2025-02-13 16:08:27,978 - __main__ - INFO - Processing message: hola
2025-02-13 16:08:27,980 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful assistant.'}, {'role': 'user', 'content': 'hola'}], 'model': 'gpt-3.5-turbo'}}
2025-02-13 16:08:28,003 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-02-13 16:08:28,003 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-13 16:08:28,051 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x105465fd0>
2025-02-13 16:08:28,052 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10528cdd0> server_hostname='api.openai.com' timeout=5.0
2025-02-13 16:08:28,074 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x105e007d0>
2025-02-13 16:08:28,074 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 16:08:28,075 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 16:08:28,075 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 16:08:28,075 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 16:08:28,075 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 16:08:28,639 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 13 Feb 2025 15:08:28 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-jrobrdv8bldfakdoyxdsiky9'), (b'openai-processing-ms', b'341'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'200000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'199973'), (b'x-ratelimit-reset-requests', b'8.64s'), (b'x-ratelimit-reset-tokens', b'7ms'), (b'x-request-id', b'req_123349ab43d400bd3f38972bd4bfce88'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=uZgqhRRVjvzPSXFOfgdr9fai957prdbla8bNdSK1JcM-1739459308-1.0.1.1-GPCmWk1H6v6b06fRsGAwVPPXTJoPdqgDTMe4MHm5eAtqqYLbrMR.xzYNXsLrWiKk32yX6YsqPTbbQTXNX4koig; path=/; expires=Thu, 13-Feb-25 15:38:28 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=RMwP3FQR7XpzRbFTxP2J4XoSBR1TbVQ0OzA8QhQ3KNc-1739459308631-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9115bbe3dea22f8c-MAD'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-02-13 16:08:28,642 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-02-13 16:08:28,642 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 16:08:28,643 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 16:08:28,643 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 16:08:28,644 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 16:08:28,644 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers([('date', 'Thu, 13 Feb 2025 15:08:28 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'user-jrobrdv8bldfakdoyxdsiky9'), ('openai-processing-ms', '341'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '10000'), ('x-ratelimit-limit-tokens', '200000'), ('x-ratelimit-remaining-requests', '9999'), ('x-ratelimit-remaining-tokens', '199973'), ('x-ratelimit-reset-requests', '8.64s'), ('x-ratelimit-reset-tokens', '7ms'), ('x-request-id', 'req_123349ab43d400bd3f38972bd4bfce88'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=uZgqhRRVjvzPSXFOfgdr9fai957prdbla8bNdSK1JcM-1739459308-1.0.1.1-GPCmWk1H6v6b06fRsGAwVPPXTJoPdqgDTMe4MHm5eAtqqYLbrMR.xzYNXsLrWiKk32yX6YsqPTbbQTXNX4koig; path=/; expires=Thu, 13-Feb-25 15:38:28 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=RMwP3FQR7XpzRbFTxP2J4XoSBR1TbVQ0OzA8QhQ3KNc-1739459308631-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '9115bbe3dea22f8c-MAD'), ('content-encoding', 'gzip'), ('alt-svc', 'h3=":443"; ma=86400')])
2025-02-13 16:08:28,644 - openai._base_client - DEBUG - request_id: req_123349ab43d400bd3f38972bd4bfce88
2025-02-13 16:08:28,651 - __main__ - INFO - Got response: Hola! En qu puedo ayudarte hoy?
2025-02-13 16:08:28,652 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 308526396, 'text': 'Hola! En qu puedo ayudarte hoy?'}`
2025-02-13 16:08:28,653 - httpcore.connection - DEBUG - close.started
2025-02-13 16:08:28,653 - httpcore.connection - DEBUG - close.complete
2025-02-13 16:08:28,653 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-13 16:08:28,695 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x105e00e10>
2025-02-13 16:08:28,696 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10528eb10> server_hostname='api.telegram.org' timeout=5.0
2025-02-13 16:08:28,741 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x105e1c180>
2025-02-13 16:08:28,742 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 16:08:28,742 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 16:08:28,742 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 16:08:28,742 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 16:08:28,743 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 16:08:28,829 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 13 Feb 2025 15:08:28 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'283'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-02-13 16:08:28,830 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8050570051:AAG4byICXKPopJ4pkngSfXLBEa7ZnJ4eTrs/sendMessage "HTTP/1.1 200 OK"
2025-02-13 16:08:28,830 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 16:08:28,830 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 16:08:28,830 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 16:08:28,831 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 16:08:28,831 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 28, 'from': {'id': 8050570051, 'is_bot': True, 'first_name': 'Dildong', 'username': 'Dildong_bot'}, 'chat': {'id': 308526396, 'first_name': 'Naz', 'username': 'nm_2719', 'type': 'private'}, 'date': 1739459308, 'text': 'Hola! En qu puedo ayudarte hoy?'}`
2025-02-13 16:08:40,005 - __main__ - INFO - Received webhook: {'update_id': 647682804, 'message': {'message_id': 29, 'from': {'id': 308526396, 'is_bot': False, 'first_name': 'Naz', 'username': 'nm_2719', 'language_code': 'en', 'is_premium': True}, 'chat': {'id': 308526396, 'first_name': 'Naz', 'username': 'nm_2719', 'type': 'private'}, 'date': 1739459320, 'text': 'Wohoo we finally talk'}}
2025-02-13 16:08:40,006 - __main__ - INFO - Created update object: Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Naz', id=308526396, type=<ChatType.PRIVATE>, username='nm_2719'), date=datetime.datetime(2025, 2, 13, 15, 8, 40, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Naz', id=308526396, is_bot=False, is_premium=True, language_code='en', username='nm_2719'), group_chat_created=False, message_id=29, supergroup_chat_created=False, text='Wohoo we finally talk'), update_id=647682804)
2025-02-13 16:08:40,006 - __main__ - INFO - Processing message: Wohoo we finally talk
2025-02-13 16:08:40,011 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful assistant.'}, {'role': 'user', 'content': 'Wohoo we finally talk'}], 'model': 'gpt-3.5-turbo'}}
2025-02-13 16:08:40,012 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-02-13 16:08:40,012 - httpcore.connection - DEBUG - close.started
2025-02-13 16:08:40,013 - httpcore.connection - DEBUG - close.complete
2025-02-13 16:08:40,013 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-13 16:08:40,035 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x105e01950>
2025-02-13 16:08:40,035 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10528cdd0> server_hostname='api.openai.com' timeout=5.0
2025-02-13 16:08:40,058 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x105e1d6e0>
2025-02-13 16:08:40,059 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 16:08:40,059 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 16:08:40,059 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 16:08:40,059 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 16:08:40,059 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 16:08:40,624 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 13 Feb 2025 15:08:40 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-jrobrdv8bldfakdoyxdsiky9'), (b'openai-processing-ms', b'403'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'200000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'199968'), (b'x-ratelimit-reset-requests', b'8.64s'), (b'x-ratelimit-reset-tokens', b'9ms'), (b'x-request-id', b'req_f6463981ccd66a96db04b6b5eaac9ecf'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9115bc2ed80be0a7-MAD'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-02-13 16:08:40,625 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-02-13 16:08:40,626 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 16:08:40,627 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 16:08:40,627 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 16:08:40,627 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 16:08:40,627 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Thu, 13 Feb 2025 15:08:40 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-jrobrdv8bldfakdoyxdsiky9', 'openai-processing-ms': '403', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '200000', 'x-ratelimit-remaining-requests': '9999', 'x-ratelimit-remaining-tokens': '199968', 'x-ratelimit-reset-requests': '8.64s', 'x-ratelimit-reset-tokens': '9ms', 'x-request-id': 'req_f6463981ccd66a96db04b6b5eaac9ecf', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '9115bc2ed80be0a7-MAD', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2025-02-13 16:08:40,627 - openai._base_client - DEBUG - request_id: req_f6463981ccd66a96db04b6b5eaac9ecf
2025-02-13 16:08:40,629 - __main__ - INFO - Got response: Hello! I'm here to assist you with anything you need. What would you like to talk about?
2025-02-13 16:08:40,629 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 308526396, 'text': "Hello! I'm here to assist you with anything you need. What would you like to talk about?"}`
2025-02-13 16:08:40,631 - httpcore.connection - DEBUG - close.started
2025-02-13 16:08:40,631 - httpcore.connection - DEBUG - close.complete
2025-02-13 16:08:40,631 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-13 16:08:40,673 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x105e1dcd0>
2025-02-13 16:08:40,673 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10528eb10> server_hostname='api.telegram.org' timeout=5.0
2025-02-13 16:08:40,722 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x105e24710>
2025-02-13 16:08:40,723 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 16:08:40,723 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 16:08:40,723 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 16:08:40,724 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 16:08:40,724 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 16:08:40,821 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 13 Feb 2025 15:08:40 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'322'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-02-13 16:08:40,824 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8050570051:AAG4byICXKPopJ4pkngSfXLBEa7ZnJ4eTrs/sendMessage "HTTP/1.1 200 OK"
2025-02-13 16:08:40,824 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 16:08:40,824 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 16:08:40,824 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 16:08:40,825 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 16:08:40,825 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 30, 'from': {'id': 8050570051, 'is_bot': True, 'first_name': 'Dildong', 'username': 'Dildong_bot'}, 'chat': {'id': 308526396, 'first_name': 'Naz', 'username': 'nm_2719', 'type': 'private'}, 'date': 1739459320, 'text': "Hello! I'm here to assist you with anything you need. What would you like to talk about?"}`
2025-02-13 16:08:48,283 - __main__ - INFO - Received webhook: {'update_id': 647682805, 'message': {'message_id': 31, 'from': {'id': 308526396, 'is_bot': False, 'first_name': 'Naz', 'username': 'nm_2719', 'language_code': 'en', 'is_premium': True}, 'chat': {'id': 308526396, 'first_name': 'Naz', 'username': 'nm_2719', 'type': 'private'}, 'date': 1739459328, 'text': '   .'}}
2025-02-13 16:08:48,284 - __main__ - INFO - Created update object: Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Naz', id=308526396, type=<ChatType.PRIVATE>, username='nm_2719'), date=datetime.datetime(2025, 2, 13, 15, 8, 48, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Naz', id=308526396, is_bot=False, is_premium=True, language_code='en', username='nm_2719'), group_chat_created=False, message_id=31, supergroup_chat_created=False, text='   .'), update_id=647682805)
2025-02-13 16:08:48,284 - __main__ - INFO - Processing message:    .
2025-02-13 16:08:48,288 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful assistant.'}, {'role': 'user', 'content': '   .'}], 'model': 'gpt-3.5-turbo'}}
2025-02-13 16:08:48,289 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-02-13 16:08:48,289 - httpcore.connection - DEBUG - close.started
2025-02-13 16:08:48,290 - httpcore.connection - DEBUG - close.complete
2025-02-13 16:08:48,290 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-13 16:08:48,315 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x105e1cc30>
2025-02-13 16:08:48,315 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10528cdd0> server_hostname='api.openai.com' timeout=5.0
2025-02-13 16:08:48,340 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x105e25130>
2025-02-13 16:08:48,341 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 16:08:48,341 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 16:08:48,341 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 16:08:48,341 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 16:08:48,341 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 16:08:49,017 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 13 Feb 2025 15:08:49 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-jrobrdv8bldfakdoyxdsiky9'), (b'openai-processing-ms', b'538'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'200000'), (b'x-ratelimit-remaining-requests', b'9998'), (b'x-ratelimit-remaining-tokens', b'199962'), (b'x-ratelimit-reset-requests', b'9.006s'), (b'x-ratelimit-reset-tokens', b'11ms'), (b'x-request-id', b'req_48225d848f72faf0d19363c573d6ac14'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9115bc62885f69eb-MAD'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-02-13 16:08:49,018 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-02-13 16:08:49,018 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 16:08:49,018 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 16:08:49,019 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 16:08:49,019 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 16:08:49,019 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Thu, 13 Feb 2025 15:08:49 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-jrobrdv8bldfakdoyxdsiky9', 'openai-processing-ms': '538', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '200000', 'x-ratelimit-remaining-requests': '9998', 'x-ratelimit-remaining-tokens': '199962', 'x-ratelimit-reset-requests': '9.006s', 'x-ratelimit-reset-tokens': '11ms', 'x-request-id': 'req_48225d848f72faf0d19363c573d6ac14', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '9115bc62885f69eb-MAD', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2025-02-13 16:08:49,019 - openai._base_client - DEBUG - request_id: req_48225d848f72faf0d19363c573d6ac14
2025-02-13 16:08:49,020 - __main__ - INFO - Got response: ,     .   ?
2025-02-13 16:08:49,020 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 308526396, 'text': ',     .   ?'}`
2025-02-13 16:08:49,021 - httpcore.connection - DEBUG - close.started
2025-02-13 16:08:49,021 - httpcore.connection - DEBUG - close.complete
2025-02-13 16:08:49,021 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-13 16:08:49,072 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x105e305a0>
2025-02-13 16:08:49,072 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10528eb10> server_hostname='api.telegram.org' timeout=5.0
2025-02-13 16:08:49,118 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x105e306b0>
2025-02-13 16:08:49,118 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 16:08:49,118 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 16:08:49,118 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 16:08:49,119 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 16:08:49,119 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 16:08:49,225 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 13 Feb 2025 15:08:49 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'503'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-02-13 16:08:49,226 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8050570051:AAG4byICXKPopJ4pkngSfXLBEa7ZnJ4eTrs/sendMessage "HTTP/1.1 200 OK"
2025-02-13 16:08:49,226 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 16:08:49,226 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 16:08:49,226 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 16:08:49,227 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 16:08:49,227 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 32, 'from': {'id': 8050570051, 'is_bot': True, 'first_name': 'Dildong', 'username': 'Dildong_bot'}, 'chat': {'id': 308526396, 'first_name': 'Naz', 'username': 'nm_2719', 'type': 'private'}, 'date': 1739459329, 'text': ',     .   ?'}`
2025-02-13 16:12:56,445 - __main__ - INFO - Received webhook: {'update_id': 647682806, 'message': {'message_id': 33, 'from': {'id': 308526396, 'is_bot': False, 'first_name': 'Naz', 'username': 'nm_2719', 'language_code': 'en', 'is_premium': True}, 'chat': {'id': 308526396, 'first_name': 'Naz', 'username': 'nm_2719', 'type': 'private'}, 'date': 1739459576, 'text': '/analyze', 'entities': [{'offset': 0, 'length': 8, 'type': 'bot_command'}]}}
2025-02-13 16:12:56,446 - __main__ - INFO - Created update object: Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Naz', id=308526396, type=<ChatType.PRIVATE>, username='nm_2719'), date=datetime.datetime(2025, 2, 13, 15, 12, 56, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=8, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Naz', id=308526396, is_bot=False, is_premium=True, language_code='en', username='nm_2719'), group_chat_created=False, message_id=33, supergroup_chat_created=False, text='/analyze'), update_id=647682806)
2025-02-13 16:12:56,447 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 308526396, 'text': 'History analysis completed! The context has been updated.'}`
2025-02-13 16:12:56,447 - httpcore.connection - DEBUG - close.started
2025-02-13 16:12:56,447 - httpcore.connection - DEBUG - close.complete
2025-02-13 16:12:56,447 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-13 16:12:56,515 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x105471b50>
2025-02-13 16:12:56,515 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10528eb10> server_hostname='api.telegram.org' timeout=5.0
2025-02-13 16:12:56,556 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x105471d50>
2025-02-13 16:12:56,557 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 16:12:56,557 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 16:12:56,557 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 16:12:56,557 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 16:12:56,557 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 16:12:56,665 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 13 Feb 2025 15:12:56 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'291'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-02-13 16:12:56,667 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8050570051:AAG4byICXKPopJ4pkngSfXLBEa7ZnJ4eTrs/sendMessage "HTTP/1.1 200 OK"
2025-02-13 16:12:56,667 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 16:12:56,667 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 16:12:56,667 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 16:12:56,668 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 16:12:56,669 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 34, 'from': {'id': 8050570051, 'is_bot': True, 'first_name': 'Dildong', 'username': 'Dildong_bot'}, 'chat': {'id': 308526396, 'first_name': 'Naz', 'username': 'nm_2719', 'type': 'private'}, 'date': 1739459576, 'text': 'History analysis completed! The context has been updated.'}`
2025-02-13 16:13:15,759 - __main__ - INFO - Received webhook: {'update_id': 647682807, 'message': {'message_id': 35, 'from': {'id': 308526396, 'is_bot': False, 'first_name': 'Naz', 'username': 'nm_2719', 'language_code': 'en', 'is_premium': True}, 'chat': {'id': 308526396, 'first_name': 'Naz', 'username': 'nm_2719', 'type': 'private'}, 'date': 1739459595, 'text': '/help', 'entities': [{'offset': 0, 'length': 5, 'type': 'bot_command'}]}}
2025-02-13 16:13:15,760 - __main__ - INFO - Created update object: Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Naz', id=308526396, type=<ChatType.PRIVATE>, username='nm_2719'), date=datetime.datetime(2025, 2, 13, 15, 13, 15, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=5, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Naz', id=308526396, is_bot=False, is_premium=True, language_code='en', username='nm_2719'), group_chat_created=False, message_id=35, supergroup_chat_created=False, text='/help'), update_id=647682807)
2025-02-13 16:13:15,760 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 308526396, 'text': 'Here are the available commands:\n\n/start - Start the bot\n/help - Show this help message\n/clear - Clear conversation history\n/session - Set session duration\n/analyze - Analyze entire conversation history'}`
2025-02-13 16:13:15,760 - httpcore.connection - DEBUG - close.started
2025-02-13 16:13:15,761 - httpcore.connection - DEBUG - close.complete
2025-02-13 16:13:15,761 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-13 16:13:15,802 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1054767b0>
2025-02-13 16:13:15,803 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10528eb10> server_hostname='api.telegram.org' timeout=5.0
2025-02-13 16:13:15,852 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x105476d50>
2025-02-13 16:13:15,853 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 16:13:15,855 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 16:13:15,856 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 16:13:15,857 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 16:13:15,857 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 16:13:15,949 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 13 Feb 2025 15:13:15 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'687'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-02-13 16:13:15,951 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8050570051:AAG4byICXKPopJ4pkngSfXLBEa7ZnJ4eTrs/sendMessage "HTTP/1.1 200 OK"
2025-02-13 16:13:15,951 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 16:13:15,952 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 16:13:15,955 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 16:13:15,956 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 16:13:15,959 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 36, 'from': {'id': 8050570051, 'is_bot': True, 'first_name': 'Dildong', 'username': 'Dildong_bot'}, 'chat': {'id': 308526396, 'first_name': 'Naz', 'username': 'nm_2719', 'type': 'private'}, 'date': 1739459595, 'text': 'Here are the available commands:\n\n/start - Start the bot\n/help - Show this help message\n/clear - Clear conversation history\n/session - Set session duration\n/analyze - Analyze entire conversation history', 'entities': [{'offset': 34, 'length': 6, 'type': 'bot_command'}, {'offset': 57, 'length': 5, 'type': 'bot_command'}, {'offset': 88, 'length': 6, 'type': 'bot_command'}, {'offset': 124, 'length': 8, 'type': 'bot_command'}, {'offset': 156, 'length': 8, 'type': 'bot_command'}]}`
2025-02-13 16:22:45,284 - telegram.ext.Application - INFO - Application is stopping. This might take a moment.
2025-02-13 16:22:45,284 - telegram.ext.Application - DEBUG - Waiting for update_queue to join
2025-02-13 16:22:45,284 - telegram.ext.Application - DEBUG - Application stopped fetching of updates.
2025-02-13 16:22:45,284 - telegram.ext.Application - DEBUG - Waiting for `create_task` calls to be processed
2025-02-13 16:22:45,284 - telegram.ext.Application - INFO - Application.stop() complete
2025-02-13 16:22:45,327 - httpcore.connection - DEBUG - close.started
2025-02-13 16:22:45,327 - httpcore.connection - DEBUG - close.complete
2025-02-13 16:22:46,944 - __main__ - INFO - MOCK_MODE is set to: False
2025-02-13 16:22:46,969 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-13 16:22:46,972 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getMe` with parameters `{}`
2025-02-13 16:22:46,975 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-13 16:22:47,078 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10895b8c0>
2025-02-13 16:22:47,078 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10370ec30> server_hostname='api.telegram.org' timeout=5.0
2025-02-13 16:22:47,119 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10894a210>
2025-02-13 16:22:47,120 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 16:22:47,120 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 16:22:47,120 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 16:22:47,120 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 16:22:47,120 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 16:22:47,168 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 13 Feb 2025 15:22:47 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'248'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-02-13 16:22:47,168 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8050570051:AAG4byICXKPopJ4pkngSfXLBEa7ZnJ4eTrs/getMe "HTTP/1.1 200 OK"
2025-02-13 16:22:47,168 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 16:22:47,168 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 16:22:47,168 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 16:22:47,168 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 16:22:47,168 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getMe` finished with return value `{'id': 8050570051, 'is_bot': True, 'first_name': 'Dildong', 'username': 'Dildong_bot', 'can_join_groups': True, 'can_read_all_group_messages': False, 'supports_inline_queries': False, 'can_connect_to_business': False, 'has_main_web_app': False}`
2025-02-13 16:22:47,169 - telegram.ext.ExtBot - DEBUG - This Bot is already initialized.
2025-02-13 16:22:47,169 - telegram.ext.Application - INFO - Application started
2025-02-13 16:22:47,169 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `setMyCommands` with parameters `{'commands': [BotCommand(command='start', description='Start the bot'), BotCommand(command='help', description='Show available commands'), BotCommand(command='clear', description='Clear conversation history'), BotCommand(command='session', description='Set session duration'), BotCommand(command='analyze', description='Analyze conversation history'), BotCommand(command='context', description='Show historical context')]}`
2025-02-13 16:22:47,169 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 16:22:47,169 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 16:22:47,169 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 16:22:47,169 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 16:22:47,169 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 16:22:47,218 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 13 Feb 2025 15:22:47 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-02-13 16:22:47,219 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8050570051:AAG4byICXKPopJ4pkngSfXLBEa7ZnJ4eTrs/setMyCommands "HTTP/1.1 200 OK"
2025-02-13 16:22:47,219 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 16:22:47,219 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 16:22:47,219 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 16:22:47,219 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 16:22:47,219 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `setMyCommands` finished with return value `True`
2025-02-13 16:23:03,708 - __main__ - INFO - Received webhook: {'update_id': 647682808, 'message': {'message_id': 37, 'from': {'id': 308526396, 'is_bot': False, 'first_name': 'Naz', 'username': 'nm_2719', 'language_code': 'en', 'is_premium': True}, 'chat': {'id': 308526396, 'first_name': 'Naz', 'username': 'nm_2719', 'type': 'private'}, 'date': 1739460183, 'text': '/session', 'entities': [{'offset': 0, 'length': 8, 'type': 'bot_command'}]}}
2025-02-13 16:23:03,710 - __main__ - INFO - Created update object: Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Naz', id=308526396, type=<ChatType.PRIVATE>, username='nm_2719'), date=datetime.datetime(2025, 2, 13, 15, 23, 3, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=8, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Naz', id=308526396, is_bot=False, is_premium=True, language_code='en', username='nm_2719'), group_chat_created=False, message_id=37, supergroup_chat_created=False, text='/session'), update_id=647682808)
2025-02-13 16:23:03,710 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 308526396, 'text': 'Session duration set to medium (6 hours)'}`
2025-02-13 16:23:03,710 - httpcore.connection - DEBUG - close.started
2025-02-13 16:23:03,711 - httpcore.connection - DEBUG - close.complete
2025-02-13 16:23:03,711 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-13 16:23:03,757 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1089dce10>
2025-02-13 16:23:03,758 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10370ec30> server_hostname='api.telegram.org' timeout=5.0
2025-02-13 16:23:03,809 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108913100>
2025-02-13 16:23:03,809 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 16:23:03,809 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 16:23:03,810 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 16:23:03,810 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 16:23:03,810 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 16:23:03,936 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 13 Feb 2025 15:23:03 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'274'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-02-13 16:23:03,936 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8050570051:AAG4byICXKPopJ4pkngSfXLBEa7ZnJ4eTrs/sendMessage "HTTP/1.1 200 OK"
2025-02-13 16:23:03,936 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 16:23:03,936 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 16:23:03,938 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 16:23:03,938 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 16:23:03,939 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 38, 'from': {'id': 8050570051, 'is_bot': True, 'first_name': 'Dildong', 'username': 'Dildong_bot'}, 'chat': {'id': 308526396, 'first_name': 'Naz', 'username': 'nm_2719', 'type': 'private'}, 'date': 1739460183, 'text': 'Session duration set to medium (6 hours)'}`
2025-02-13 16:23:09,808 - __main__ - INFO - Received webhook: {'update_id': 647682809, 'message': {'message_id': 39, 'from': {'id': 308526396, 'is_bot': False, 'first_name': 'Naz', 'username': 'nm_2719', 'language_code': 'en', 'is_premium': True}, 'chat': {'id': 308526396, 'first_name': 'Naz', 'username': 'nm_2719', 'type': 'private'}, 'date': 1739460189, 'text': '/start', 'entities': [{'offset': 0, 'length': 6, 'type': 'bot_command'}]}}
2025-02-13 16:23:09,809 - __main__ - INFO - Created update object: Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Naz', id=308526396, type=<ChatType.PRIVATE>, username='nm_2719'), date=datetime.datetime(2025, 2, 13, 15, 23, 9, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Naz', id=308526396, is_bot=False, is_premium=True, language_code='en', username='nm_2719'), group_chat_created=False, message_id=39, supergroup_chat_created=False, text='/start'), update_id=647682809)
2025-02-13 16:23:09,809 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 308526396, 'text': " Hello! I'm your AI assistant bot. I can help you with various tasks and maintain our conversation history.\n\nUse /help to see available commands."}`
2025-02-13 16:23:09,810 - httpcore.connection - DEBUG - close.started
2025-02-13 16:23:09,810 - httpcore.connection - DEBUG - close.complete
2025-02-13 16:23:09,811 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-13 16:23:09,849 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1089e08a0>
2025-02-13 16:23:09,849 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10370ec30> server_hostname='api.telegram.org' timeout=5.0
2025-02-13 16:23:09,890 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108940710>
2025-02-13 16:23:09,891 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 16:23:09,891 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 16:23:09,891 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 16:23:09,891 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 16:23:09,891 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 16:23:09,958 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 13 Feb 2025 15:23:09 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'453'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-02-13 16:23:09,959 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8050570051:AAG4byICXKPopJ4pkngSfXLBEa7ZnJ4eTrs/sendMessage "HTTP/1.1 200 OK"
2025-02-13 16:23:09,959 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 16:23:09,959 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 16:23:09,959 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 16:23:09,959 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 16:23:09,959 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 40, 'from': {'id': 8050570051, 'is_bot': True, 'first_name': 'Dildong', 'username': 'Dildong_bot'}, 'chat': {'id': 308526396, 'first_name': 'Naz', 'username': 'nm_2719', 'type': 'private'}, 'date': 1739460189, 'text': " Hello! I'm your AI assistant bot. I can help you with various tasks and maintain our conversation history.\n\nUse /help to see available commands.", 'entities': [{'offset': 115, 'length': 5, 'type': 'bot_command'}]}`
2025-02-13 16:23:11,462 - __main__ - INFO - Received webhook: {'update_id': 647682810, 'message': {'message_id': 41, 'from': {'id': 308526396, 'is_bot': False, 'first_name': 'Naz', 'username': 'nm_2719', 'language_code': 'en', 'is_premium': True}, 'chat': {'id': 308526396, 'first_name': 'Naz', 'username': 'nm_2719', 'type': 'private'}, 'date': 1739460191, 'text': '/help', 'entities': [{'offset': 0, 'length': 5, 'type': 'bot_command'}]}}
2025-02-13 16:23:11,463 - __main__ - INFO - Created update object: Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Naz', id=308526396, type=<ChatType.PRIVATE>, username='nm_2719'), date=datetime.datetime(2025, 2, 13, 15, 23, 11, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=5, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Naz', id=308526396, is_bot=False, is_premium=True, language_code='en', username='nm_2719'), group_chat_created=False, message_id=41, supergroup_chat_created=False, text='/help'), update_id=647682810)
2025-02-13 16:23:11,464 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 308526396, 'text': 'Here are the available commands:\n\n/start - Start the bot\n/help - Show this help message\n/clear - Clear conversation history\n/session - Set session duration\n/analyze - Analyze entire conversation history\n/context - Show current historical context'}`
2025-02-13 16:23:11,464 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 16:23:11,465 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 16:23:11,465 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 16:23:11,465 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 16:23:11,465 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 16:23:11,565 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 13 Feb 2025 15:23:11 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'778'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-02-13 16:23:11,566 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8050570051:AAG4byICXKPopJ4pkngSfXLBEa7ZnJ4eTrs/sendMessage "HTTP/1.1 200 OK"
2025-02-13 16:23:11,566 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 16:23:11,566 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 16:23:11,567 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 16:23:11,567 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 16:23:11,567 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 42, 'from': {'id': 8050570051, 'is_bot': True, 'first_name': 'Dildong', 'username': 'Dildong_bot'}, 'chat': {'id': 308526396, 'first_name': 'Naz', 'username': 'nm_2719', 'type': 'private'}, 'date': 1739460191, 'text': 'Here are the available commands:\n\n/start - Start the bot\n/help - Show this help message\n/clear - Clear conversation history\n/session - Set session duration\n/analyze - Analyze entire conversation history\n/context - Show current historical context', 'entities': [{'offset': 34, 'length': 6, 'type': 'bot_command'}, {'offset': 57, 'length': 5, 'type': 'bot_command'}, {'offset': 88, 'length': 6, 'type': 'bot_command'}, {'offset': 124, 'length': 8, 'type': 'bot_command'}, {'offset': 156, 'length': 8, 'type': 'bot_command'}, {'offset': 203, 'length': 8, 'type': 'bot_command'}]}`
2025-02-13 16:23:13,958 - __main__ - INFO - Received webhook: {'update_id': 647682811, 'message': {'message_id': 43, 'from': {'id': 308526396, 'is_bot': False, 'first_name': 'Naz', 'username': 'nm_2719', 'language_code': 'en', 'is_premium': True}, 'chat': {'id': 308526396, 'first_name': 'Naz', 'username': 'nm_2719', 'type': 'private'}, 'date': 1739460193, 'text': '/context', 'entities': [{'offset': 0, 'length': 8, 'type': 'bot_command'}]}}
2025-02-13 16:23:13,959 - __main__ - INFO - Created update object: Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Naz', id=308526396, type=<ChatType.PRIVATE>, username='nm_2719'), date=datetime.datetime(2025, 2, 13, 15, 23, 13, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=8, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Naz', id=308526396, is_bot=False, is_premium=True, language_code='en', username='nm_2719'), group_chat_created=False, message_id=43, supergroup_chat_created=False, text='/context'), update_id=647682811)
2025-02-13 16:23:13,960 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 308526396, 'text': 'No historical context available yet.'}`
2025-02-13 16:23:13,961 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 16:23:13,961 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 16:23:13,961 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 16:23:13,961 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 16:23:13,961 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 16:23:14,022 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 13 Feb 2025 15:23:14 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'270'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-02-13 16:23:14,022 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8050570051:AAG4byICXKPopJ4pkngSfXLBEa7ZnJ4eTrs/sendMessage "HTTP/1.1 200 OK"
2025-02-13 16:23:14,023 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 16:23:14,023 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 16:23:14,023 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 16:23:14,023 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 16:23:14,023 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 44, 'from': {'id': 8050570051, 'is_bot': True, 'first_name': 'Dildong', 'username': 'Dildong_bot'}, 'chat': {'id': 308526396, 'first_name': 'Naz', 'username': 'nm_2719', 'type': 'private'}, 'date': 1739460194, 'text': 'No historical context available yet.'}`
2025-02-13 16:23:58,471 - __main__ - INFO - Received webhook: {'update_id': 647682812, 'message': {'message_id': 45, 'from': {'id': 308526396, 'is_bot': False, 'first_name': 'Naz', 'username': 'nm_2719', 'language_code': 'en', 'is_premium': True}, 'chat': {'id': 308526396, 'first_name': 'Naz', 'username': 'nm_2719', 'type': 'private'}, 'date': 1739460238, 'text': 'my name is Nazar'}}
2025-02-13 16:23:58,474 - __main__ - INFO - Created update object: Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Naz', id=308526396, type=<ChatType.PRIVATE>, username='nm_2719'), date=datetime.datetime(2025, 2, 13, 15, 23, 58, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Naz', id=308526396, is_bot=False, is_premium=True, language_code='en', username='nm_2719'), group_chat_created=False, message_id=45, supergroup_chat_created=False, text='my name is Nazar'), update_id=647682812)
2025-02-13 16:23:58,474 - __main__ - INFO - Processing message: my name is Nazar
2025-02-13 16:23:58,479 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful assistant with specific traits:\n            1. You maintain conversation history and context\n            2. You work in group of people, you know names of people you are talking to, you know relations between them\n            3. You know a lot of interesting facts about people you are talking to\n            4. You can analyze and summarize past conversations\n            5. You adapt your responses based on user preferences\n            6. You help with various tasks while maintaining a friendly tone\n            7. You remember important details about the user\n            \n            Important guidelines:\n            - Always reply in a language of the  user and remember his last language used for new conversation\n            - Keep responses concise but informative\n            - Use emojis occasionally to add warmth\n            - If context is unclear, politely ask for clarification\n            - Reference relevant past conversations when appropriate\n            '}, {'role': 'user', 'content': 'my name is Nazar'}], 'model': 'gpt-3.5-turbo'}}
2025-02-13 16:23:58,504 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-02-13 16:23:58,505 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-13 16:23:58,548 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10895be00>
2025-02-13 16:23:58,548 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10370cef0> server_hostname='api.openai.com' timeout=5.0
2025-02-13 16:23:58,575 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10894bd90>
2025-02-13 16:23:58,575 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 16:23:58,576 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 16:23:58,576 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 16:23:58,576 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 16:23:58,576 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 16:23:59,443 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 13 Feb 2025 15:23:59 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-jrobrdv8bldfakdoyxdsiky9'), (b'openai-processing-ms', b'381'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'200000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'199728'), (b'x-ratelimit-reset-requests', b'8.64s'), (b'x-ratelimit-reset-tokens', b'81ms'), (b'x-request-id', b'req_7f20ec5a96175faec86474be367647a4'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=Li6Y8bkkUjYKRHWT33uuK8IYu3XbFm2QgViHjLEbpNk-1739460239-1.0.1.1-6iR8aVxRjTzvbm_txX8xKAp9V98HVM2fY6NjEe2sK4znSGn4U1FQVzV0xVaVC1t9BS3OGDtS3wTFFBRvmf_q3g; path=/; expires=Thu, 13-Feb-25 15:53:59 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=XEsnf8i2ggSkJSKC4rQTI8s2w6zyMG5DDmUxCACBZkY-1739460239486-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9115d29b8c69e091-MAD'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-02-13 16:23:59,446 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-02-13 16:23:59,446 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 16:23:59,447 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 16:23:59,447 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 16:23:59,447 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 16:23:59,447 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers([('date', 'Thu, 13 Feb 2025 15:23:59 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'user-jrobrdv8bldfakdoyxdsiky9'), ('openai-processing-ms', '381'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '10000'), ('x-ratelimit-limit-tokens', '200000'), ('x-ratelimit-remaining-requests', '9999'), ('x-ratelimit-remaining-tokens', '199728'), ('x-ratelimit-reset-requests', '8.64s'), ('x-ratelimit-reset-tokens', '81ms'), ('x-request-id', 'req_7f20ec5a96175faec86474be367647a4'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=Li6Y8bkkUjYKRHWT33uuK8IYu3XbFm2QgViHjLEbpNk-1739460239-1.0.1.1-6iR8aVxRjTzvbm_txX8xKAp9V98HVM2fY6NjEe2sK4znSGn4U1FQVzV0xVaVC1t9BS3OGDtS3wTFFBRvmf_q3g; path=/; expires=Thu, 13-Feb-25 15:53:59 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=XEsnf8i2ggSkJSKC4rQTI8s2w6zyMG5DDmUxCACBZkY-1739460239486-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '9115d29b8c69e091-MAD'), ('content-encoding', 'gzip'), ('alt-svc', 'h3=":443"; ma=86400')])
2025-02-13 16:23:59,448 - openai._base_client - DEBUG - request_id: req_7f20ec5a96175faec86474be367647a4
2025-02-13 16:23:59,455 - __main__ - INFO - Got response: Hello Nazar! It's great to see you again. How can I assist you today? 
2025-02-13 16:23:59,455 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 308526396, 'text': "Hello Nazar! It's great to see you again. How can I assist you today? "}`
2025-02-13 16:23:59,456 - httpcore.connection - DEBUG - close.started
2025-02-13 16:23:59,457 - httpcore.connection - DEBUG - close.complete
2025-02-13 16:23:59,457 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-13 16:23:59,497 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108a28380>
2025-02-13 16:23:59,497 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10370ec30> server_hostname='api.telegram.org' timeout=5.0
2025-02-13 16:23:59,534 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108a28490>
2025-02-13 16:23:59,534 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 16:23:59,535 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 16:23:59,535 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 16:23:59,535 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 16:23:59,535 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 16:23:59,598 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 13 Feb 2025 15:23:59 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'316'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-02-13 16:23:59,598 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8050570051:AAG4byICXKPopJ4pkngSfXLBEa7ZnJ4eTrs/sendMessage "HTTP/1.1 200 OK"
2025-02-13 16:23:59,599 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 16:23:59,599 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 16:23:59,599 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 16:23:59,599 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 16:23:59,599 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 46, 'from': {'id': 8050570051, 'is_bot': True, 'first_name': 'Dildong', 'username': 'Dildong_bot'}, 'chat': {'id': 308526396, 'first_name': 'Naz', 'username': 'nm_2719', 'type': 'private'}, 'date': 1739460239, 'text': "Hello Nazar! It's great to see you again. How can I assist you today? "}`
2025-02-13 16:24:07,126 - __main__ - INFO - Received webhook: {'update_id': 647682813, 'message': {'message_id': 47, 'from': {'id': 308526396, 'is_bot': False, 'first_name': 'Naz', 'username': 'nm_2719', 'language_code': 'en', 'is_premium': True}, 'chat': {'id': 308526396, 'first_name': 'Naz', 'username': 'nm_2719', 'type': 'private'}, 'date': 1739460247, 'text': 'Do you remember my name from history?'}}
2025-02-13 16:24:07,126 - __main__ - INFO - Created update object: Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Naz', id=308526396, type=<ChatType.PRIVATE>, username='nm_2719'), date=datetime.datetime(2025, 2, 13, 15, 24, 7, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Naz', id=308526396, is_bot=False, is_premium=True, language_code='en', username='nm_2719'), group_chat_created=False, message_id=47, supergroup_chat_created=False, text='Do you remember my name from history?'), update_id=647682813)
2025-02-13 16:24:07,126 - __main__ - INFO - Processing message: Do you remember my name from history?
2025-02-13 16:24:07,128 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful assistant with specific traits:\n            1. You maintain conversation history and context\n            2. You work in group of people, you know names of people you are talking to, you know relations between them\n            3. You know a lot of interesting facts about people you are talking to\n            4. You can analyze and summarize past conversations\n            5. You adapt your responses based on user preferences\n            6. You help with various tasks while maintaining a friendly tone\n            7. You remember important details about the user\n            \n            Important guidelines:\n            - Always reply in a language of the  user and remember his last language used for new conversation\n            - Keep responses concise but informative\n            - Use emojis occasionally to add warmth\n            - If context is unclear, politely ask for clarification\n            - Reference relevant past conversations when appropriate\n            '}, {'role': 'user', 'content': 'Do you remember my name from history?'}], 'model': 'gpt-3.5-turbo'}}
2025-02-13 16:24:07,129 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-02-13 16:24:07,129 - httpcore.connection - DEBUG - close.started
2025-02-13 16:24:07,129 - httpcore.connection - DEBUG - close.complete
2025-02-13 16:24:07,129 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-13 16:24:07,148 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10894ac10>
2025-02-13 16:24:07,148 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10370cef0> server_hostname='api.openai.com' timeout=5.0
2025-02-13 16:24:07,170 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x108913100>
2025-02-13 16:24:07,170 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 16:24:07,171 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 16:24:07,171 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 16:24:07,171 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 16:24:07,171 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 16:24:07,710 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 13 Feb 2025 15:24:07 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-jrobrdv8bldfakdoyxdsiky9'), (b'openai-processing-ms', b'383'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'200000'), (b'x-ratelimit-remaining-requests', b'9998'), (b'x-ratelimit-remaining-tokens', b'199723'), (b'x-ratelimit-reset-requests', b'8.99s'), (b'x-ratelimit-reset-tokens', b'82ms'), (b'x-request-id', b'req_10d41563f7866668cfa2cb7f810e4b33'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9115d2d13e44214e-MAD'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-02-13 16:24:07,711 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-02-13 16:24:07,712 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 16:24:07,713 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 16:24:07,714 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 16:24:07,714 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 16:24:07,714 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Thu, 13 Feb 2025 15:24:07 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-jrobrdv8bldfakdoyxdsiky9', 'openai-processing-ms': '383', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '200000', 'x-ratelimit-remaining-requests': '9998', 'x-ratelimit-remaining-tokens': '199723', 'x-ratelimit-reset-requests': '8.99s', 'x-ratelimit-reset-tokens': '82ms', 'x-request-id': 'req_10d41563f7866668cfa2cb7f810e4b33', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '9115d2d13e44214e-MAD', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2025-02-13 16:24:07,714 - openai._base_client - DEBUG - request_id: req_10d41563f7866668cfa2cb7f810e4b33
2025-02-13 16:24:07,715 - __main__ - INFO - Got response: Yes, your name is John. How can I assist you today, John?
2025-02-13 16:24:07,716 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 308526396, 'text': 'Yes, your name is John. How can I assist you today, John?'}`
2025-02-13 16:24:07,716 - httpcore.connection - DEBUG - close.started
2025-02-13 16:24:07,717 - httpcore.connection - DEBUG - close.complete
2025-02-13 16:24:07,717 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-13 16:24:07,759 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1089d9e50>
2025-02-13 16:24:07,760 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10370ec30> server_hostname='api.telegram.org' timeout=5.0
2025-02-13 16:24:07,802 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1089da050>
2025-02-13 16:24:07,802 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-13 16:24:07,803 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-13 16:24:07,803 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-13 16:24:07,803 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-13 16:24:07,803 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-13 16:24:07,881 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 13 Feb 2025 15:24:07 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'291'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-02-13 16:24:07,883 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8050570051:AAG4byICXKPopJ4pkngSfXLBEa7ZnJ4eTrs/sendMessage "HTTP/1.1 200 OK"
2025-02-13 16:24:07,883 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-13 16:24:07,884 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-13 16:24:07,884 - httpcore.http11 - DEBUG - response_closed.started
2025-02-13 16:24:07,884 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-13 16:24:07,884 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 48, 'from': {'id': 8050570051, 'is_bot': True, 'first_name': 'Dildong', 'username': 'Dildong_bot'}, 'chat': {'id': 308526396, 'first_name': 'Naz', 'username': 'nm_2719', 'type': 'private'}, 'date': 1739460247, 'text': 'Yes, your name is John. How can I assist you today, John?'}`
